{"version":3,"file":"proton.js","sources":["../src/math/MathUtils.js","../src/math/Vector2D.js","../src/math/Span.js","../src/utils/WebGLUtil.js","../src/utils/DomUtil.js","../src/utils/ImgUtil.js","../src/utils/Util.js","../src/utils/PUID.js","../src/core/Pool.js","../src/debug/Stats.js","../src/events/EventDispatcher.js","../src/math/Integration.js","../src/core/Proton.js","../src/math/ease.js","../src/core/Particle.js","../src/utils/ColorUtil.js","../src/math/Polar2D.js","../src/math/Mat3.js","../src/math/ArraySpan.js","../src/math/Rectangle.js","../src/initialize/Rate.js","../src/initialize/Initialize.js","../src/initialize/Life.js","../src/zone/Zone.js","../src/zone/PointZone.js","../src/initialize/Position.js","../src/initialize/Velocity.js","../src/initialize/Mass.js","../src/initialize/Radius.js","../src/initialize/Body.js","../src/behaviour/Behaviour.js","../src/behaviour/Force.js","../src/behaviour/Attraction.js","../src/behaviour/RandomDrift.js","../src/behaviour/Gravity.js","../src/behaviour/Collision.js","../src/behaviour/CrossZone.js","../src/behaviour/Alpha.js","../src/behaviour/Scale.js","../src/behaviour/Rotate.js","../src/behaviour/Color.js","../src/behaviour/Repulsion.js","../src/behaviour/GravityWell.js","../src/initialize/InitializeUtil.js","../src/emitter/Emitter.js","../src/emitter/BehaviourEmitter.js","../src/emitter/FollowEmitter.js","../src/render/BaseRenderer.js","../src/render/CanvasRenderer.js","../src/render/DomRenderer.js","../src/render/EaselRenderer.js","../src/render/PixelRenderer.js","../src/render/PixiRenderer.js","../src/utils/MStack.js","../src/render/WebGLRenderer.js","../src/render/CustomRenderer.js","../src/zone/LineZone.js","../src/zone/CircleZone.js","../src/zone/RectZone.js","../src/zone/ImageZone.js","../src/debug/Debug.js","../src/polyfill/requestAnimationFrame.js","../src/index.js"],"sourcesContent":["const PI = 3.1415926;\r\n\r\nconst MathUtils = {\r\n\r\n    PI: PI,\r\n    PIx2: PI * 2,\r\n    PI_2: PI / 2,\r\n    PI_180: PI / 180,\r\n    N180_PI: 180 / PI,\r\n\r\n    randomAToB(a, b, INT) {\r\n        if (!INT)\r\n            return a + Math.random() * (b - a);\r\n        else\r\n            return Math.floor(Math.random() * (b - a)) + a;\r\n    },\r\n\r\n    randomFloating(center, f, INT) {\r\n        return this.randomAToB(center - f, center + f, INT);\r\n    },\r\n\r\n    randomZone(display) {},\r\n\r\n    degreeTransform(a) {\r\n        return a * PI / 180;\r\n    },\r\n\r\n    toColor16(num) {\r\n        return \"#\" + num.toString(16);\r\n    },\r\n\r\n    randomColor() {\r\n        return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).slice(-6);\r\n    }\r\n}\r\n\r\nexport default MathUtils;","import MathUtils from '../math/MathUtils';\r\n\r\nexport default class Vector2D {\r\n\r\n    constructor(x, y) {\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n    }\r\n\r\n    set(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n        return this;\r\n    }\r\n\r\n    setX(x) {\r\n        this.x = x;\r\n        return this;\r\n    }\r\n\r\n    setY(y) {\r\n        this.y = y;\r\n        return this;\r\n    }\r\n\r\n    getGradient() {\r\n        if (this.x != 0)\r\n            return Math.atan2(this.y, this.x);\r\n        else if (this.y > 0)\r\n            return MathUtils.PI_2;\r\n        else if (this.y < 0)\r\n            return -MathUtils.PI_2;\r\n    }\r\n\r\n    copy(v) {\r\n        this.x = v.x;\r\n        this.y = v.y;\r\n\r\n        return this;\r\n    }\r\n\r\n    add(v, w) {\r\n        if (w !== undefined) {\r\n            return this.addVectors(v, w);\r\n        }\r\n\r\n        this.x += v.x;\r\n        this.y += v.y;\r\n\r\n        return this;\r\n    }\r\n\r\n    addXY(a, b) {\r\n        this.x += a;\r\n        this.y += b;\r\n\r\n        return this;\r\n    }\r\n\r\n    addVectors(a, b) {\r\n        this.x = a.x + b.x;\r\n        this.y = a.y + b.y;\r\n\r\n        return this;\r\n    }\r\n\r\n    sub(v, w) {\r\n        if (w !== undefined) {\r\n            return this.subVectors(v, w);\r\n        }\r\n\r\n        this.x -= v.x;\r\n        this.y -= v.y;\r\n\r\n        return this;\r\n    }\r\n\r\n    subVectors(a, b) {\r\n        this.x = a.x - b.x;\r\n        this.y = a.y - b.y;\r\n\r\n        return this;\r\n    }\r\n\r\n    divideScalar(s) {\r\n        if (s !== 0) {\r\n            this.x /= s;\r\n            this.y /= s;\r\n        } else {\r\n            this.set(0, 0);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    multiplyScalar(s) {\r\n        this.x *= s;\r\n        this.y *= s;\r\n\r\n        return this;\r\n    }\r\n\r\n    negate() {\r\n        return this.multiplyScalar(-1);\r\n    }\r\n\r\n    dot(v) {\r\n        return this.x * v.x + this.y * v.y;\r\n    }\r\n\r\n    lengthSq() {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n\r\n    length() {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y);\r\n    }\r\n\r\n    normalize() {\r\n        return this.divideScalar(this.length());\r\n    }\r\n\r\n    distanceTo(v) {\r\n        return Math.sqrt(this.distanceToSquared(v));\r\n    }\r\n\r\n    rotate(tha) {\r\n        const x = this.x;\r\n        const y = this.y;\r\n\r\n        this.x = x * Math.cos(tha) + y * Math.sin(tha);\r\n        this.y = -x * Math.sin(tha) + y * Math.cos(tha);\r\n\r\n        return this;\r\n    }\r\n\r\n    distanceToSquared(v) {\r\n        const dx = this.x - v.x;\r\n        const dy = this.y - v.y;\r\n\r\n        return dx * dx + dy * dy;\r\n    }\r\n\r\n    lerp(v, alpha) {\r\n        this.x += (v.x - this.x) * alpha;\r\n        this.y += (v.y - this.y) * alpha;\r\n\r\n        return this;\r\n    }\r\n\r\n    equals(v) {\r\n        return ((v.x === this.x) && (v.y === this.y));\r\n    }\r\n\r\n    clear() {\r\n        this.x = 0.0;\r\n        this.y = 0.0;\r\n        return this;\r\n    }\r\n\r\n    clone() {\r\n        return new Vector2D(this.x, this.y);\r\n    }\r\n}","import Util from '../utils/Util';\r\nimport MathUtils from '../math/MathUtils';\r\n\r\nexport default class Span {\r\n\r\n\tconstructor(a, b, center) {\r\n\t\tthis.isArray = false;\r\n\r\n\t\tif (Util.isArray(a)) {\r\n\t\t\tthis.isArray = true;\r\n\t\t\tthis.a = a;\r\n\t\t} else {\r\n\t\t\tthis.a = Util.initValue(a, 1);\r\n\t\t\tthis.b = Util.initValue(b, this.a);\r\n\t\t\tthis.center = Util.initValue(center, false);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetValue(INT) {\r\n\t\tif (this.isArray) {\r\n\t\t\treturn this.a[Math.floor(this.a.length * Math.random())];\r\n\t\t} else {\r\n\t\t\tif (!this.center)\r\n\t\t\t\treturn MathUtils.randomAToB(this.a, this.b, INT);\r\n\t\t\telse\r\n\t\t\t\treturn MathUtils.randomFloating(this.a, this.b, INT);\r\n\t\t}\r\n\t}\r\n}","export default {\r\n\r\n    /**\r\n     * @memberof Proton#Proton.WebGLUtil\r\n     * @method ipot\r\n     *\r\n     * @todo add description\r\n     * @todo add length description\r\n     *\r\n     * @param {Number} length\r\n     *\r\n     * @return {Boolean}\r\n     */\r\n    ipot(length) {\r\n        return (length & (length - 1)) == 0;\r\n    },\r\n\r\n    /**\r\n     * @memberof Proton#Proton.WebGLUtil\r\n     * @method nhpot\r\n     *\r\n     * @todo add description\r\n     * @todo add length description\r\n     *\r\n     * @param {Number} length\r\n     *\r\n     * @return {Number}\r\n     */\r\n    nhpot(length) {\r\n        --length;\r\n        for (let i = 1; i < 32; i <<= 1) {\r\n            length = length | length >> i;\r\n        }\r\n\r\n        return length + 1;\r\n    },\r\n\r\n    /**\r\n     * @memberof Proton#Proton.WebGLUtil\r\n     * @method makeTranslation\r\n     *\r\n     * @todo add description\r\n     * @todo add tx, ty description\r\n     * @todo add return description\r\n     *\r\n     * @param {Number} tx either 0 or 1\r\n     * @param {Number} ty either 0 or 1\r\n     *\r\n     * @return {Object}\r\n     */\r\n    makeTranslation(tx, ty) {\r\n        return [1, 0, 0, 0, 1, 0, tx, ty, 1];\r\n    },\r\n\r\n    /**\r\n     * @memberof Proton#Proton.WebGLUtil\r\n     * @method makeRotation\r\n     *\r\n     * @todo add description\r\n     * @todo add return description\r\n     *\r\n     * @param {Number} angleInRadians\r\n     *\r\n     * @return {Object}\r\n     */\r\n    makeRotation(angleInRadians) {\r\n        let c = Math.cos(angleInRadians);\r\n        let s = Math.sin(angleInRadians);\r\n\r\n        return [c, -s, 0, s, c, 0, 0, 0, 1];\r\n    },\r\n\r\n    /**\r\n     * @memberof Proton#Proton.WebGLUtil\r\n     * @method makeScale\r\n     *\r\n     * @todo add description\r\n     * @todo add tx, ty description\r\n     * @todo add return description\r\n     *\r\n     * @param {Number} sx either 0 or 1\r\n     * @param {Number} sy either 0 or 1\r\n     *\r\n     * @return {Object}\r\n     */\r\n    makeScale(sx, sy) {\r\n        return [sx, 0, 0, 0, sy, 0, 0, 0, 1];\r\n    },\r\n\r\n    /**\r\n     * @memberof Proton#Proton.WebGLUtil\r\n     * @method matrixMultiply\r\n     *\r\n     * @todo add description\r\n     * @todo add a, b description\r\n     * @todo add return description\r\n     *\r\n     * @param {Object} a\r\n     * @param {Object} b\r\n     *\r\n     * @return {Object}\r\n     */\r\n    matrixMultiply(a, b) {\r\n        let a00 = a[0 * 3 + 0];\r\n        let a01 = a[0 * 3 + 1];\r\n        let a02 = a[0 * 3 + 2];\r\n        let a10 = a[1 * 3 + 0];\r\n        let a11 = a[1 * 3 + 1];\r\n        let a12 = a[1 * 3 + 2];\r\n        let a20 = a[2 * 3 + 0];\r\n        let a21 = a[2 * 3 + 1];\r\n        let a22 = a[2 * 3 + 2];\r\n        let b00 = b[0 * 3 + 0];\r\n        let b01 = b[0 * 3 + 1];\r\n        let b02 = b[0 * 3 + 2];\r\n        let b10 = b[1 * 3 + 0];\r\n        let b11 = b[1 * 3 + 1];\r\n        let b12 = b[1 * 3 + 2];\r\n        let b20 = b[2 * 3 + 0];\r\n        let b21 = b[2 * 3 + 1];\r\n        let b22 = b[2 * 3 + 2];\r\n\r\n        return [\r\n            a00 * b00 + a01 * b10 + a02 * b20,\r\n            a00 * b01 + a01 * b11 + a02 * b21,\r\n            a00 * b02 + a01 * b12 + a02 * b22,\r\n            a10 * b00 + a11 * b10 + a12 * b20,\r\n            a10 * b01 + a11 * b11 + a12 * b21,\r\n            a10 * b02 + a11 * b12 + a12 * b22,\r\n            a20 * b00 + a21 * b10 + a22 * b20,\r\n            a20 * b01 + a21 * b11 + a22 * b21,\r\n            a20 * b02 + a21 * b12 + a22 * b22\r\n        ];\r\n    }\r\n}","export default {\r\n\r\n    /**\r\n     * Creates and returns a new canvas. The opacity is by default set to 0\r\n     *\r\n     * @memberof Proton#Proton.DomUtil\r\n     * @method createCanvas\r\n     *\r\n     * @param {String} $id the canvas' id\r\n     * @param {Number} $width the canvas' width\r\n     * @param {Number} $height the canvas' height\r\n     * @param {String} [$position=absolute] the canvas' position, default is 'absolute' \r\n     *\r\n     * @return {Object}\r\n     */\r\n    createCanvas(id, width, height, position) {\r\n        const dom = document.createElement(\"canvas\");\r\n        position = position || 'absolute';\r\n\r\n        dom.id = id;\r\n        dom.width = width;\r\n        dom.height = height;\r\n        dom.style.opacity = 0;\r\n        dom.style.position = position;\r\n\r\n        this.transform(dom, -500, -500, 0, 0);\r\n\r\n        return dom;\r\n    },\r\n\r\n    createDiv(id, width, height) {\r\n        const dom = document.createElement(\"div\");\r\n\r\n        dom.id = id;\r\n        dom.style.position = 'absolute';\r\n        this.resize(dom, width, height);\r\n\r\n        return dom;\r\n    },\r\n\r\n    resize(dom, width, height) {\r\n        dom.style.width = width + 'px';\r\n        dom.style.height = height + 'px';\r\n        dom.style.marginLeft = -width / 2 + 'px';\r\n        dom.style.marginTop = -height / 2 + 'px';\r\n    },\r\n\r\n    /**\r\n     * Adds a transform: translate(), scale(), rotate() to a given div dom for all browsers\r\n     *\r\n     * @memberof Proton#Proton.DomUtil\r\n     * @method transform\r\n     *\r\n     * @param {HTMLDivElement} div \r\n     * @param {Number} $x \r\n     * @param {Number} $y \r\n     * @param {Number} $scale \r\n     * @param {Number} $rotate \r\n     */\r\n    transform(div, x, y, scale, rotate) {\r\n        const transform = `translate(${x}px, ${y}px) scale(${scale}) rotate(${rotate}deg)`;\r\n\r\n        div.style.willChange = 'transform';\r\n        this.css3(div, 'transform', transform);\r\n    },\r\n\r\n    transform3d(div, x, y, scale, rotate) {\r\n        const transform = `translate3d(${x}px, ${y}px, 0) scale(${scale}) rotate(${rotate}deg)`;\r\n\r\n        div.style.willChange = 'transform';\r\n        this.css3(div, 'backfaceVisibility', 'hidden');\r\n        this.css3(div, 'transform', transform);\r\n    },\r\n\r\n    css3(div, key, val) {\r\n        const bkey = key.charAt(0).toUpperCase() + key.substr(1);\r\n\r\n        div.style[`Webkit${bkey}`] = val;\r\n        div.style[`Moz${bkey}`] = val;\r\n        div.style[`O${bkey}`] = val;\r\n        div.style[`ms${bkey}`] = val;\r\n        div.style[`${key}`] = val;\r\n    }\r\n}","import WebGLUtil from './WebGLUtil';\r\nimport DomUtil from './DomUtil';\r\n\r\nconst IMG_CACHE = {};\r\nconst CANVAS_CACHE = {};\r\nlet canvasID = 0;\r\n\r\nexport default {\r\n\r\n    /**\r\n     * This will get the image data. It could be necessary to create a Proton.Zone.\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method getImageData\r\n     *\r\n     * @param {HTMLCanvasElement}   context any canvas, must be a 2dContext 'canvas.getContext('2d')'\r\n     * @param {Object}              image   could be any dom image, e.g. document.getElementById('thisIsAnImgTag');\r\n     * @param {Proton.Rectangle}    rect\r\n     */\r\n    getImageData(context, image, rect) {\r\n        context.drawImage(image, rect.x, rect.y);\r\n        const imagedata = context.getImageData(rect.x, rect.y, rect.width, rect.height);\r\n        context.clearRect(rect.x, rect.y, rect.width, rect.height);\r\n\r\n        return imagedata;\r\n    },\r\n\r\n    /**\r\n     * @memberof Proton#Proton.Util\r\n     * @method getImgFromCache\r\n     *\r\n     * @todo add description\r\n     * @todo describe func\r\n     *\r\n     * @param {Mixed}               img\r\n     * @param {Proton.Particle}     particle\r\n     * @param {Boolean}             drawCanvas  set to true if a canvas should be saved into particle.transform.canvas\r\n     * @param {Boolean}             func\r\n     */\r\n    getImgFromCache(img, callback, param) {\r\n        const src = typeof (img) == 'string' ? img : img.src;\r\n\r\n        if (IMG_CACHE[src]) {\r\n            callback(IMG_CACHE[src], param);\r\n        } else {\r\n            const image = new Image();\r\n            image.onload = e => {\r\n                IMG_CACHE[src] = e.target;\r\n                callback(IMG_CACHE[src], param);\r\n            }\r\n\r\n            image.src = src;\r\n        }\r\n    },\r\n\r\n    getCanvasFromCache(img, callback, param) {\r\n        const src = img.src;\r\n\r\n        if (!CANVAS_CACHE[src]) {\r\n            const width = WebGLUtil.nhpot(img.width);\r\n            const height = WebGLUtil.nhpot(img.height);\r\n\r\n            const canvas = DomUtil.createCanvas(`canvas_cache_${canvasID}`, width, height);\r\n            const context = canvas.getContext('2d');\r\n            context.drawImage(img, 0, 0, img.width, img.height);\r\n\r\n            CANVAS_CACHE[src] = canvas;\r\n        }\r\n\r\n        callback && callback(CANVAS_CACHE[src], param);\r\n\r\n        return CANVAS_CACHE[src];\r\n    }\r\n}","import Vector2D from '../math/Vector2D';\r\nimport Span from '../math/Span';\r\nimport ImgUtil from './ImgUtil';\r\nimport DomUtil from './DomUtil';\r\n\r\nexport default {\r\n\r\n    /**\r\n     * Returns the default if the value is null or undefined\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method initValue\r\n     *\r\n     * @param {Mixed} value a specific value, could be everything but null or undefined\r\n     * @param {Mixed} defaults the default if the value is null or undefined\r\n     */\r\n    initValue(value, defaults) {\r\n        value = (value !== null && value !== undefined) ? value : defaults;\r\n        return value;\r\n    },\r\n\r\n    /**\r\n     * Checks if the value is a valid array\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method isArray\r\n     *\r\n     * @param {Array} value Any array\r\n     *\r\n     * @returns {Boolean} \r\n     */\r\n    isArray(value) {\r\n        return Object.prototype.toString.call(value) === '[object Array]';\r\n    },\r\n\r\n    /**\r\n     * Destroyes the given array\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method destroyArray\r\n     *\r\n     * @param {Array} array Any array\r\n     */\r\n    destroyArray(array) {\r\n        if (array) array.length = 0;\r\n    },\r\n\r\n    /**\r\n     * Destroyes the given object\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method destroyObject\r\n     *\r\n     * @param {Object} obj Any object\r\n     */\r\n    destroyObject(obj, ignore) {\r\n        for (let o in obj) {\r\n            if (ignore && ignore.indexOf(o) > -1) continue;\r\n            delete obj[o];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Makes an instance of a class and binds the given array\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method classApply\r\n     *\r\n     * @param {Function} constructor A class to make an instance from\r\n     * @param {Array} [args] Any array to bind it to the constructor\r\n     *\r\n     * @return {Object} The instance of constructor, optionally bind with args\r\n     */\r\n    classApply(constructor, args) {\r\n        if (!args) return new constructor;\r\n\r\n        args = [null].concat(args);\r\n        const factoryFunction = constructor.bind.apply(constructor, args);\r\n        return new factoryFunction();\r\n    },\r\n\r\n    /**\r\n     * @memberof Proton#Proton.Util\r\n     * @method setVector2DByObject\r\n     *\r\n     * @todo add description for param `target`\r\n     * @todo add description for param `pOBJ`\r\n     * @todo add description for function\r\n     *\r\n     * @param {Object} target\r\n     * @param {Object} pOBJ\r\n     */\r\n    setVector2DByObject(target, pOBJ) {\r\n        if (this.hasProp(pOBJ, 'x')) target.p.x = pOBJ['x'];\r\n        if (this.hasProp(pOBJ, 'y')) target.p.y = pOBJ['y'];\r\n\r\n        if (this.hasProp(pOBJ, 'vx')) target.v.x = pOBJ['vx'];\r\n        if (this.hasProp(pOBJ, 'vy')) target.v.y = pOBJ['vy'];\r\n\r\n        if (this.hasProp(pOBJ, 'ax')) target.a.x = pOBJ['ax'];\r\n        if (this.hasProp(pOBJ, 'ay')) target.a.y = pOBJ['ay'];\r\n\r\n        if (this.hasProp(pOBJ, 'p')) particle.p.copy(pOBJ['p']);\r\n        if (this.hasProp(pOBJ, 'v')) particle.v.copy(pOBJ['v']);\r\n        if (this.hasProp(pOBJ, 'a')) particle.a.copy(pOBJ['a']);\r\n\r\n        if (this.hasProp(pOBJ, 'position')) particle.p.copy(pOBJ['position']);\r\n        if (this.hasProp(pOBJ, 'velocity')) particle.v.copy(pOBJ['velocity']);\r\n        if (this.hasProp(pOBJ, 'accelerate')) particle.a.copy(pOBJ['accelerate']);\r\n    },\r\n\r\n    hasProp(obj, key) {\r\n        if (!obj) return false;\r\n        return obj[key] !== undefined;\r\n        // return obj.hasOwnProperty(key);\r\n    },\r\n\r\n    /**\r\n     * set the prototype in a given prototypeObject\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method setPrototypeByObject\r\n     *\r\n     * @todo add description for param `target`\r\n     * @todo add description for param `filters`\r\n     * @todo translate desription from chinese to english\r\n     *\r\n     * @param {Object} target\r\n     * @param {Object} prototypeObject An object of single prototypes\r\n     * @param {Object} filters\r\n     *\r\n     * @return {Object} target\r\n     */\r\n    setPrototypeByObject(target, prototypeObject, filters) {\r\n        for (let singleProp in prototypeObject) {\r\n            if (target.hasOwnProperty(singleProp)) {\r\n                if (filters) {\r\n                    if (filters.indexOf(singleProp) < 0)\r\n                        target[singleProp] = this.getSpanValue(prototypeObject[singleProp]);\r\n                } else {\r\n                    target[singleProp] = this.getSpanValue(prototypeObject[singleProp]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return target;\r\n    },\r\n\r\n    /**\r\n     * Returns a new Span object\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method setSpanValue\r\n     *\r\n     * @todo a, b and c should be 'Mixed' or 'Number'?\r\n     *\r\n     * @param {Mixed | Span} a\r\n     * @param {Mixed}               b\r\n     * @param {Mixed}               c\r\n     *\r\n     * @return {Span}\r\n     */\r\n    setSpanValue(a, b, c) {\r\n        if (a instanceof Span) {\r\n            return a;\r\n        } else {\r\n            if (!b) {\r\n                return new Span(a);\r\n            } else {\r\n                if (!c)\r\n                    return new Span(a, b);\r\n                else\r\n                    return new Span(a, b, c);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Returns the value from a Span, if the param is not a Span it will return the given parameter\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method getSpanValue\r\n     *\r\n     * @param {Mixed | Span} pan\r\n     *\r\n     * @return {Mixed} the value of Span OR the parameter if it is not a Span\r\n     */\r\n    getSpanValue(pan) {\r\n        return pan instanceof Span ? pan.getValue() : pan;\r\n    },\r\n\r\n    /**\r\n     * This will get the image data. It could be necessary to create a Proton.Zone.\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method getImageData\r\n     *\r\n     * @param {HTMLCanvasElement}   context any canvas, must be a 2dContext 'canvas.getContext('2d')'\r\n     * @param {Object}              image   could be any dom image, e.g. document.getElementById('thisIsAnImgTag');\r\n     * @param {Proton.Rectangle}    rect\r\n     */\r\n    getImageData(context, image, rect) {\r\n        return ImgUtil.getImageData(context, image, rect);\r\n    },\r\n\r\n    destroy(arr, param) {\r\n        let i = arr.length;\r\n\r\n        while (i--) {\r\n            try { arr[i].destroy(param); } catch (e) { }\r\n            delete arr[i];\r\n        }\r\n\r\n        arr.length = 0;\r\n    }\r\n\r\n}","export default {\r\n    id: 0,\r\n    cache: {},\r\n\r\n    getID(target) {\r\n        let uid = this.getCacheID(target);\r\n        if (uid) return uid;\r\n\r\n        uid = `PUID_${this.id++}`;\r\n        this.cache[uid] = target;\r\n\r\n        return uid;\r\n    },\r\n\r\n    getCacheID(target) {\r\n        let obj;\r\n        for (let id in this.cache) {\r\n            obj = this.cache[id];\r\n\r\n            if (obj === target) return id;\r\n            \r\n            if (typeof obj === 'object' && typeof target === 'object' && obj.isInner && target.isInner) {\r\n                if (obj.src === target.src)\r\n                    return id;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    getTarget(uid) {\r\n        return this.cache[uid];\r\n    }\r\n}","/**\r\n * get    -> PUID :: uid-> Body\r\n *        -> cache[abc].         -> cache[abc] .pop()\r\n *                               -> create [new Body| clone]\r\n *        -> return p1: { __pid: abc }\r\n * \r\n * expire -> cache[abc]= [p0, p1];\r\n * \r\n */\r\nimport Util from '../utils/Util';\r\nimport PUID from '../utils/PUID';\r\n\r\nexport default class Pool {\r\n\r\n    /**\r\n     * @memberof! Proton#\r\n     * @constructor\r\n     * @alias Proton.Pool\r\n     *\r\n     * @todo add description\r\n     * @todo add description of properties\r\n     *\r\n     * @property {Number} total\r\n     * @property {Object} cache\r\n     */\r\n    constructor(num) {\r\n        this.total = 0;\r\n        this.cache = {};\r\n    }\r\n\r\n    /**\r\n     * @todo add description\r\n     *\r\n     * @method get\r\n     * @memberof Proton#Proton.Pool\r\n     *\r\n     * @param {Object|Function} target\r\n     * @param {Object} [params] just add if `target` is a function\r\n     *\r\n     * @return {Object}\r\n     */\r\n    get(target, params, uid) {\r\n        let p;\r\n        uid = uid || target.__puid || PUID.getID(target);\r\n\r\n        if (this.cache[uid] && this.cache[uid].length > 0)\r\n            p = this.cache[uid].pop();\r\n        else\r\n            p = this.createOrClone(target, params);\r\n\r\n        p.__puid = target.__puid || uid;\r\n        return p;\r\n    }\r\n\r\n    /**\r\n     * @todo add description\r\n     *\r\n     * @method set\r\n     * @memberof Proton#Proton.Pool\r\n     *\r\n     * @param {Object} target\r\n     *\r\n     * @return {Object}\r\n     */\r\n    expire(target) {\r\n        return this.getCache(target.__puid).push(target);\r\n    }\r\n\r\n    /**\r\n     * Creates a new class instance\r\n     *\r\n     * @todo add more documentation \r\n     *\r\n     * @method create\r\n     * @memberof Proton#Proton.Pool\r\n     *\r\n     * @param {Object|Function} target any Object or Function\r\n     * @param {Object} [params] just add if `target` is a function\r\n     *\r\n     * @return {Object}\r\n     */\r\n    createOrClone(target, params) {\r\n        this.total++;\r\n\r\n        if (this.create) {\r\n            return this.create(target, params);\r\n        } else if (typeof target == \"function\") {\r\n            return Util.classApply(target, params);\r\n        } else {\r\n            return target.clone();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @todo add description - what is in the cache?\r\n     *\r\n     * @method getCount\r\n     * @memberof Proton#Proton.Pool\r\n     *\r\n     * @return {Number}\r\n     */\r\n    getCount() {\r\n        let count = 0;\r\n\r\n        for (let id in this.cache)\r\n            count += this.cache[id].length;\r\n\r\n        return count++;;\r\n    }\r\n\r\n    /**\r\n     * Destroyes all items from Pool.cache\r\n     *\r\n     * @method destroy\r\n     * @memberof Proton#Proton.Pool\r\n     */\r\n    destroy() {\r\n        for (let id in this.cache) {\r\n            this.cache[id].length = 0;\r\n            delete this.cache[id];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns Pool.cache\r\n     *\r\n     * @method getCache\r\n     * @memberof Proton#Proton.Pool\r\n     * @private\r\n     *\r\n     * @param {Number} uid the unique id\r\n     *\r\n     * @return {Object}\r\n     */\r\n    getCache(uid) {\r\n        uid = uid || \"default\";\r\n\r\n        if (!this.cache[uid]) this.cache[uid] = [];\r\n        return this.cache[uid];\r\n    }\r\n}","export default class Stats {\r\n\r\n    constructor(proton) {\r\n        this.proton = proton;\r\n        this.container = null;\r\n        this.type = 1;\r\n\r\n        this.emitterIndex = 0;\r\n        this.rendererIndex = 0;\r\n    }\r\n\r\n    update(style, body) {\r\n        this.add(style, body);\r\n\r\n        const emitter = this.getEmitter();\r\n        const renderer = this.getRenderer();\r\n        let str = \"\";\r\n\r\n        switch (this.type) {\r\n            case 2:\r\n                str += \"emitter:\" + this.proton.emitters.length + \"<br>\";\r\n                if (emitter) str += \"em speed:\" + emitter.emitSpeed + \"<br>\";\r\n                if (emitter) str += \"pos:\" + this.getEmitterPos(emitter);\r\n                break;\r\n\r\n            case 3:\r\n                if (emitter) str += \"initializes:\" + emitter.initializes.length + \"<br>\";\r\n                if (emitter) str += \"<span style='display:inline-block;'>\" + this.concatArr(emitter.initializes) + \"</span><br>\";\r\n                if (emitter) str += \"behaviours:\" + emitter.behaviours.length + \"<br>\";\r\n                if (emitter) str += \"<span style='display:inline-block;'>\" + this.concatArr(emitter.behaviours) + \"</span><br>\";\r\n                break;\r\n\r\n            case 4:\r\n                if (renderer) str += renderer.name + \"<br>\";\r\n                if (renderer) str += \"body:\" + this.getCreatedNumber(renderer) + \"<br>\";\r\n                break;\r\n\r\n            default:\r\n                str += \"particles:\" + this.proton.getCount() + \"<br>\";\r\n                str += \"pool:\" + this.proton.pool.getCount() + \"<br>\";\r\n                str += \"total:\" + this.proton.pool.total;\r\n        }\r\n\r\n        this.container.innerHTML = str;\r\n    }\r\n\r\n    add(style, body) {\r\n        if (!this.container) {\r\n            this.type = 1;\r\n\r\n            this.container = document.createElement('div');\r\n            this.container.style.cssText = [\r\n                'position:absolute;bottom:0px;left:0;cursor:pointer;',\r\n                'opacity:0.9;z-index:10000;padding:10px;font-size:12px;font-family:Helvetica,Arial,sans-serif;',\r\n                'width:120px;height:50px;background-color:#002;color:#0ff;'\r\n            ].join('');\r\n\r\n            this.container.addEventListener('click', e => {\r\n                this.type++;\r\n                if (this.type > 4) this.type = 1;\r\n            }, false);\r\n\r\n            let bg, color;\r\n            switch (style) {\r\n                case 2:\r\n                    bg = \"#201\";\r\n                    color = \"#f08\";\r\n                    break;\r\n\r\n                case 3:\r\n                    bg = \"#020\";\r\n                    color = \"#0f0\";\r\n                    break;\r\n\r\n                default:\r\n                    bg = \"#002\";\r\n                    color = \"#0ff\";\r\n            }\r\n\r\n            this.container.style[\"background-color\"] = bg;\r\n            this.container.style[\"color\"] = color;\r\n        }\r\n\r\n        if (!this.container.parentNode) {\r\n            body = body || this.body || document.body;\r\n            body.appendChild(this.container);\r\n        }\r\n    }\r\n\r\n    getEmitter() {\r\n        return this.proton.emitters[this.emitterIndex];\r\n    }\r\n\r\n    getRenderer() {\r\n        return this.proton.renderers[this.rendererIndex];\r\n    }\r\n\r\n    concatArr(arr) {\r\n        let result = '';\r\n        if (!arr || !arr.length) return result;\r\n\r\n        for (let i = 0; i < arr.length; i++) {\r\n            result += (arr[i].name || '').substr(0, 1) + '.';\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getCreatedNumber(renderer) {\r\n        return renderer.pool.total || (renderer.cpool && renderer.cpool.total) || 0;\r\n    }\r\n\r\n    getEmitterPos(e) {\r\n        return Math.round(e.p.x) + \",\" + Math.round(e.p.y);\r\n    }\r\n}","/*\r\n * EventDispatcher\r\n * This code reference since http://createjs.com/.\r\n *\r\n **/\r\n\r\nexport default class EventDispatcher {\r\n\r\n    constructor() {\r\n        this._listeners = null;\r\n    }\r\n\r\n    static bind(TargetClass){\r\n        TargetClass.prototype.dispatchEvent = EventDispatcher.prototype.dispatchEvent;\r\n        TargetClass.prototype.hasEventListener = EventDispatcher.prototype.hasEventListener;\r\n        TargetClass.prototype.addEventListener = EventDispatcher.prototype.addEventListener;\r\n        TargetClass.prototype.removeEventListener = EventDispatcher.prototype.removeEventListener;\r\n        TargetClass.prototype.removeAllEventListeners = EventDispatcher.prototype.removeAllEventListeners;\r\n    }\r\n\r\n    addEventListener(type, listener) {\r\n        if (!this._listeners) {\r\n            this._listeners = {};\r\n        } else {\r\n            this.removeEventListener(type, listener);\r\n        }\r\n\r\n        if (!this._listeners[type]) this._listeners[type] = [];\r\n        this._listeners[type].push(listener);\r\n\r\n        return listener;\r\n    }\r\n\r\n    removeEventListener(type, listener) {\r\n        if (!this._listeners) return;\r\n        if (!this._listeners[type]) return;\r\n\r\n        const arr = this._listeners[type];\r\n        const length = arr.length;\r\n\r\n        for (let i = 0;i < length; i++) {\r\n            if (arr[i] == listener) {\r\n                if (length == 1) {\r\n                    delete (this._listeners[type]);\r\n                }\r\n\r\n                // allows for faster checks.\r\n                else {\r\n                    arr.splice(i, 1);\r\n                }\r\n\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    removeAllEventListeners(type) {\r\n        if (!type)\r\n            this._listeners = null;\r\n        else if (this._listeners)\r\n            delete (this._listeners[type]);\r\n    }\r\n\r\n    dispatchEvent(type, args) {\r\n        let result = false;\r\n        const listeners = this._listeners;\r\n\r\n        if (type && listeners) {\r\n            let arr = listeners[type];\r\n            if (!arr) return result;\r\n\r\n            //arr = arr.slice();\r\n            // to avoid issues with items being removed or added during the dispatch\r\n\r\n            let handler;\r\n            let i = arr.length;\r\n            while (i--) {\r\n                handler = arr[i];\r\n                result = result || handler(args);\r\n            }\r\n\r\n        }\r\n\r\n        return !!result;\r\n    }\r\n\r\n    hasEventListener(type) {\r\n        const listeners = this._listeners;\r\n        return !!(listeners && listeners[type]);\r\n    }\r\n\r\n}","import Util from '../utils/Util';\r\n\r\nexport default class Integration {\r\n\r\n\tconstructor(type) {\r\n\t\tthis.type = type;\r\n\t}\r\n\r\n\tcalculate(particles, time, damping) {\r\n\t\tthis.eulerIntegrate(particles, time, damping);\r\n\t}\r\n\r\n\t// Euler Integrate\r\n\teulerIntegrate(particle, time, damping) {\r\n\t\tif (!particle.sleep) {\r\n\t\t\tparticle.old.p.copy(particle.p);\r\n\t\t\tparticle.old.v.copy(particle.v);\r\n\r\n\t\t\tparticle.a.multiplyScalar(1 / particle.mass);\r\n\t\t\tparticle.v.add(particle.a.multiplyScalar(time));\r\n\t\t\tparticle.p.add(particle.old.v.multiplyScalar(time));\r\n\r\n\t\t\tif (damping) particle.v.multiplyScalar(damping);\r\n\r\n\t\t\tparticle.a.clear();\r\n\t\t}\r\n\t}\r\n}","import Pool from './Pool';\r\nimport Util from '../utils/Util';\r\nimport Stats from '../debug/Stats';\r\nimport EventDispatcher from '../events/EventDispatcher';\r\nimport Integration from '../math/Integration';\r\n\r\nexport default class Proton {\r\n\r\n    static USE_CLOCK = false;\r\n\r\n    //1:100\r\n    static MEASURE = 100;\r\n    static EULER = 'euler';\r\n    static RK2 = 'runge-kutta2';\r\n\r\n    static PARTICLE_CREATED = 'PARTICLE_CREATED';\r\n    static PARTICLE_UPDATE = 'PARTICLE_UPDATE';\r\n    static PARTICLE_SLEEP = 'PARTICLE_SLEEP';\r\n    static PARTICLE_DEAD = 'PARTICLE_DEAD';\r\n    static PROTON_UPDATE = 'PROTON_UPDATE';\r\n    static PROTON_UPDATE_AFTER = 'PROTON_UPDATE_AFTER';\r\n    static EMITTER_ADDED = 'EMITTER_ADDED';\r\n    static EMITTER_REMOVED = 'EMITTER_REMOVED';\r\n\r\n    static amendChangeTabsBug = true;\r\n\r\n    /**\r\n     * The constructor to add emitters\r\n     *\r\n     * @constructor Proton\r\n     *\r\n     * @todo proParticleCount is not in use\r\n     * @todo add more documentation of the single properties and parameters\r\n     *\r\n     * @param {Number} [proParticleCount] not in use?\r\n     * @param {Number} [integrationType=Proton.EULER]\r\n     *\r\n     * @property {String} [integrationType=Proton.EULER]\r\n     * @property {Array} emitters   All added emitter\r\n     * @property {Array} renderers  All added renderer\r\n     * @property {Number} time      The active time\r\n     * @property {Number} oldtime   The old time\r\n     */\r\n    constructor(integrationType) {\r\n\r\n        this.emitters = [];\r\n        this.renderers = [];\r\n\r\n        this.time = 0;\r\n        this.oldTime = 0;\r\n        this.elapsed = 0;\r\n\r\n        this.stats = new Stats(this);\r\n        this.pool = new Pool(80);\r\n\r\n        this.integrationType = Util.initValue(integrationType, Proton.EULER);\r\n        this.integrator = new Integration(this.integrationType);\r\n    }\r\n\r\n    /**\r\n    * add a type of Renderer\r\n    *\r\n    * @method addRenderer\r\n    * @memberof Proton\r\n    * @instance\r\n    *\r\n    * @param {Renderer} render\r\n    */\r\n    addRenderer(render) {\r\n        render.init(this);\r\n        this.renderers.push(render);\r\n    }\r\n\r\n    /**\r\n    * @name add a type of Renderer\r\n    *\r\n    * @method addRenderer\r\n    * @param {Renderer} render\r\n    */\r\n    removeRenderer(render) {\r\n        const index = this.renderers.indexOf(render);\r\n        this.renderers.splice(index, 1);\r\n        render.remove(this);\r\n    }\r\n\r\n    /**\r\n     * add the Emitter\r\n     *\r\n     * @method addEmitter\r\n     * @memberof Proton\r\n     * @instance\r\n     *\r\n     * @param {Emitter} emitter\r\n     */\r\n    addEmitter(emitter) {\r\n        this.emitters.push(emitter);\r\n        emitter.parent = this;\r\n\r\n        this.dispatchEvent(Proton.EMITTER_ADDED, emitter);\r\n    }\r\n\r\n    /**\r\n     * Removes an Emitter\r\n     *\r\n     * @method removeEmitter\r\n     * @memberof Proton\r\n     * @instance\r\n     *\r\n     * @param {Proton.Emitter} emitter\r\n     */\r\n    removeEmitter(emitter) {\r\n        const index = this.emitters.indexOf(emitter);\r\n        this.emitters.splice(index, 1);\r\n        emitter.parent = null;\r\n\r\n        this.dispatchEvent(Proton.EMITTER_REMOVED, emitter);\r\n    }\r\n\r\n    /**\r\n     * Updates all added emitters\r\n     *\r\n     * @method update\r\n     * @memberof Proton\r\n     * @instance\r\n     */\r\n    update() {\r\n        this.dispatchEvent(Proton.PROTON_UPDATE);\r\n\r\n        if (Proton.USE_CLOCK) {\r\n            if (!this.oldTime) this.oldTime = (new Date()).getTime();\r\n\r\n            let time = new Date().getTime();\r\n            this.elapsed = (time - this.oldTime) / 1000;\r\n            Proton.amendChangeTabsBug && this.amendChangeTabsBug();\r\n\r\n            this.oldTime = time;\r\n        } else {\r\n            this.elapsed = 0.0167;\r\n        }\r\n\r\n        // emitter update\r\n        if (this.elapsed > 0) this.emittersUpdate(this.elapsed);\r\n\r\n        this.dispatchEvent(Proton.PROTON_UPDATE_AFTER);\r\n    }\r\n\r\n    emittersUpdate(elapsed) {\r\n        let i = this.emitters.length;\r\n        while (i--) this.emitters[i].update(elapsed);\r\n    }\r\n\r\n    /**\r\n     * @todo add description\r\n     *\r\n     * @method amendChangeTabsBug\r\n     * @memberof Proton\r\n     * @instance\r\n     */\r\n    amendChangeTabsBug() {\r\n        if (this.elapsed > .5) {\r\n            this.oldTime = (new Date()).getTime();\r\n            this.elapsed = 0;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Counts all particles from all emitters\r\n     *\r\n     * @method getCount\r\n     * @memberof Proton\r\n     * @instance\r\n     */\r\n    getCount() {\r\n        let total = 0;\r\n        let i = this.emitters.length;\r\n\r\n        while (i--) total += this.emitters[i].particles.length;\r\n        return total;\r\n    }\r\n\r\n    getAllParticles() {\r\n        let particles = [];\r\n        let i = this.emitters.length;\r\n\r\n        while (i--) particles = particles.concat(this.emitters[i].particles);\r\n        return particles;\r\n    }\r\n\r\n    /**\r\n     * Destroys everything related to this Proton instance. This includes all emitters, and all properties\r\n     *\r\n     * @method destroy\r\n     * @memberof Proton\r\n     * @instance\r\n     */\r\n    destroy() {\r\n        Util.destroy(this.renderers, this.getAllParticles());\r\n        Util.destroy(this.emitters);\r\n\r\n        this.time = 0;\r\n        this.oldTime = 0;\r\n\r\n        this.pool.destroy();\r\n    }\r\n}\r\n\r\nEventDispatcher.bind(Proton);","import MathUtils from './MathUtils';\r\n\r\nexport default {\r\n\r\n    easeLinear(value) {\r\n        return value;\r\n    },\r\n\r\n    easeInQuad(value) {\r\n        return Math.pow(value, 2);\r\n    },\r\n\r\n    easeOutQuad(value) {\r\n        return -(Math.pow((value - 1), 2) - 1);\r\n    },\r\n\r\n    easeInOutQuad(value) {\r\n        if ((value /= 0.5) < 1)\r\n            return 0.5 * Math.pow(value, 2);\r\n\r\n        return -0.5 * ((value -= 2) * value - 2);\r\n    },\r\n\r\n    easeInCubic(value) {\r\n        return Math.pow(value, 3);\r\n    },\r\n\r\n    easeOutCubic(value) {\r\n        return (Math.pow((value - 1), 3) + 1);\r\n    },\r\n\r\n    easeInOutCubic(value) {\r\n        if ((value /= 0.5) < 1)\r\n            return 0.5 * Math.pow(value, 3);\r\n\r\n        return 0.5 * (Math.pow((value - 2), 3) + 2);\r\n    },\r\n\r\n    easeInQuart(value) {\r\n        return Math.pow(value, 4);\r\n    },\r\n\r\n    easeOutQuart(value) {\r\n        return -(Math.pow((value - 1), 4) - 1);\r\n    },\r\n\r\n    easeInOutQuart(value) {\r\n        if ((value /= 0.5) < 1)\r\n            return 0.5 * Math.pow(value, 4);\r\n\r\n        return -0.5 * ((value -= 2) * Math.pow(value, 3) - 2);\r\n    },\r\n\r\n    easeInSine(value) {\r\n        return -Math.cos(value * (MathUtils.PI_2)) + 1;\r\n    },\r\n\r\n    easeOutSine(value) {\r\n        return Math.sin(value * (MathUtils.PI_2));\r\n    },\r\n\r\n    easeInOutSine(value) {\r\n        return (-0.5 * (Math.cos(MathUtils.PI * value) - 1));\r\n    },\r\n\r\n    easeInExpo(value) {\r\n        return (value === 0) ? 0 : Math.pow(2, 10 * (value - 1));\r\n    },\r\n\r\n    easeOutExpo(value) {\r\n        return (value === 1) ? 1 : -Math.pow(2, -10 * value) + 1;\r\n    },\r\n\r\n    easeInOutExpo(value) {\r\n        if (value === 0)\r\n            return 0;\r\n\r\n        if (value === 1)\r\n            return 1;\r\n\r\n        if ((value /= 0.5) < 1)\r\n            return 0.5 * Math.pow(2, 10 * (value - 1));\r\n\r\n        return 0.5 * (-Math.pow(2, -10 * --value) + 2);\r\n    },\r\n\r\n    easeInCirc(value) {\r\n        return -(Math.sqrt(1 - (value * value)) - 1);\r\n    },\r\n\r\n    easeOutCirc(value) {\r\n        return Math.sqrt(1 - Math.pow((value - 1), 2));\r\n    },\r\n\r\n    easeInOutCirc(value) {\r\n        if ((value /= 0.5) < 1)\r\n            return -0.5 * (Math.sqrt(1 - value * value) - 1);\r\n        return 0.5 * (Math.sqrt(1 - (value -= 2) * value) + 1);\r\n    },\r\n\r\n    easeInBack(value) {\r\n        let s = 1.70158;\r\n        return (value) * value * ((s + 1) * value - s);\r\n    },\r\n\r\n    easeOutBack(value) {\r\n        let s = 1.70158;\r\n        return (value = value - 1) * value * ((s + 1) * value + s) + 1;\r\n    },\r\n\r\n    easeInOutBack(value) {\r\n        let s = 1.70158;\r\n        if ((value /= 0.5) < 1)\r\n            return 0.5 * (value * value * (((s *= (1.525)) + 1) * value - s));\r\n        return 0.5 * ((value -= 2) * value * (((s *= (1.525)) + 1) * value + s) + 2);\r\n    },\r\n\r\n    getEasing(ease) {\r\n        if (typeof ease === 'function')\r\n            return ease;\r\n        else\r\n            return this[ease] || this.easeLinear;\r\n    }\r\n};","import Util from '../utils/Util';\r\nimport ease from '../math/ease';\r\nimport Vector2D from '../math/Vector2D';\r\nimport MathUtils from '../math/MathUtils';\r\n\r\nexport default class Particle {\r\n\r\n    static ID = 0;\r\n\r\n    /**\r\n     * the Particle class\r\n     *\r\n     * @class Proton.Particle\r\n     * @constructor\r\n     * @param {Object} pObj the parameters object;\r\n     * for example {life:3,dead:false}\r\n     */\r\n    constructor(pOBJ) {\r\n        /**\r\n         * The particle's id;\r\n         * @property id\r\n         * @type {string}\r\n         */\r\n        this.id = `particle_${Particle.ID++}`;\r\n        this.reset('init');\r\n\r\n        pOBJ && Util.setPrototypeByObject(this, pOBJ);\r\n    }\r\n\r\n    getDirection() {\r\n        return Math.atan2(this.v.x, -this.v.y) * MathUtils.N180_PI;\r\n    }\r\n\r\n    reset(init) {\r\n        this.life = Infinity;\r\n        this.age = 0;\r\n\r\n        //Energy loss\r\n        this.energy = 1;\r\n        this.dead = false;\r\n        this.sleep = false;\r\n        this.body = null;\r\n        this.sprite = null;\r\n        this.parent = null;\r\n\r\n        this.mass = 1;\r\n        this.radius = 10;\r\n        this.alpha = 1;\r\n        this.scale = 1;\r\n        this.rotation = 0;\r\n        this.color = null;\r\n\r\n        this.easing = ease.easeLinear;\r\n\r\n        if (init == 'init') {\r\n            this.transform = {};\r\n            this.p = new Vector2D();\r\n            this.v = new Vector2D();\r\n            this.a = new Vector2D();\r\n\r\n            this.old = {\r\n                p: new Vector2D(),\r\n                v: new Vector2D(),\r\n                a: new Vector2D()\r\n            };\r\n\r\n            this.behaviours = [];\r\n        } else {\r\n            Util.destroyObject(this.transform, 'rgb');\r\n\r\n            this.p.set(0, 0);\r\n            this.v.set(0, 0);\r\n            this.a.set(0, 0);\r\n\r\n            this.old.p.set(0, 0);\r\n            this.old.v.set(0, 0);\r\n            this.old.a.set(0, 0);\r\n\r\n            this.removeAllBehaviours();\r\n        }\r\n\r\n        if (!this.transform.rgb) {\r\n            this.transform.rgb = { r: 255, g: 255, b: 255 };\r\n        } else {\r\n            this.transform.rgb.r = 255;\r\n            this.transform.rgb.g = 255;\r\n            this.transform.rgb.b = 255;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    update(time, index) {\r\n        if (!this.sleep) {\r\n            this.age += time;\r\n            this.applyBehaviours(time, index);\r\n        }\r\n\r\n        if (this.age < this.life) {\r\n            const scale = this.easing(this.age / this.life);\r\n            this.energy = Math.max(1 - scale, 0);\r\n        } else {\r\n            this.destroy();\r\n        }\r\n    }\r\n\r\n    applyBehaviours(time, index) {\r\n        const length = this.behaviours.length;\r\n        let i;\r\n\r\n        for (i = 0; i < length; i++) {\r\n            this.behaviours[i] && this.behaviours[i].applyBehaviour(this, time, index)\r\n        }\r\n    }\r\n\r\n    addBehaviour(behaviour) {\r\n        this.behaviours.push(behaviour);\r\n\r\n        if (behaviour.hasOwnProperty('parents')) behaviour.parents.push(this);\r\n        behaviour.initialize(this);\r\n    }\r\n\r\n    addBehaviours(behaviours) {\r\n        const length = behaviours.length;\r\n        let i;\r\n\r\n        for (i = 0; i < length; i++) {\r\n            this.addBehaviour(behaviours[i]);\r\n        }\r\n    }\r\n\r\n    removeBehaviour(behaviour) {\r\n        const index = this.behaviours.indexOf(behaviour);\r\n\r\n        if (index > -1) {\r\n            const behaviour = this.behaviours.splice(index, 1);\r\n            behaviour.parents = null;\r\n        }\r\n    }\r\n\r\n    removeAllBehaviours() {\r\n        Util.destroyArray(this.behaviours);\r\n    }\r\n\r\n    /**\r\n     * Destory this particle\r\n     * @method destroy\r\n     */\r\n    destroy() {\r\n        this.removeAllBehaviours();\r\n        this.energy = 0;\r\n        this.dead = true;\r\n        this.parent = null;\r\n    }\r\n\r\n}","export default {\r\n\r\n    /**\r\n     * @typedef  {Object} rgbObject\r\n     * @property {Number} r red value\r\n     * @property {Number} g green value\r\n     * @property {Number} b blue value\r\n     */\r\n    /**\r\n     * converts a hex value to a rgb object\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method hexToRGB\r\n     *\r\n     * @param {String} h any hex value, e.g. #000000 or 000000 for black\r\n     *\r\n     * @return {rgbObject}\r\n     */\r\n    hexToRGB(h) {\r\n        const hex16 = (h.charAt(0) == \"#\") ? h.substring(1, 7) : h;\r\n        const r = parseInt(hex16.substring(0, 2), 16);\r\n        const g = parseInt(hex16.substring(2, 4), 16);\r\n        const b = parseInt(hex16.substring(4, 6), 16);\r\n\r\n        return { r, g, b };\r\n    },\r\n\r\n    /**\r\n     * converts a rgb value to a rgb string\r\n     *\r\n     * @memberof Proton#Proton.Util\r\n     * @method rgbToHex\r\n     *\r\n     * @param {Object | Proton.hexToRGB} rgb a rgb object like in {@link Proton#Proton.}\r\n     *\r\n     * @return {String} rgb()\r\n     */\r\n    rgbToHex(rbg) {\r\n        return `rgb(${rbg.r}, ${rbg.g}, ${rbg.b})`;\r\n    },\r\n\r\n    getHex16FromParticle(p) {\r\n        return Number(p.transform.rgb.r) * 65536 + Number(p.transform.rgb.g) * 256 + Number(p.transform.rgb.b);\r\n    }\r\n}","import Vector2D from './Vector2D';\r\n\r\nexport default class Polar2D {\r\n\r\n\tconstructor(r, tha) {\r\n\t\tthis.r = Math.abs(r) || 0;\r\n\t\tthis.tha = tha || 0;\r\n\t}\r\n\r\n\tset(r, tha) {\r\n\t\tthis.r = r;\r\n\t\tthis.tha = tha;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetR(r) {\r\n\t\tthis.r = r;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetTha(tha) {\r\n\t\tthis.tha = tha;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tcopy(p) {\r\n\t\tthis.r = p.r;\r\n\t\tthis.tha = p.tha;\r\n\t\treturn this;\r\n\t}\r\n\r\n\ttoVector() {\r\n\t\treturn new Vector2D(this.getX(), this.getY());\r\n\t}\r\n\r\n\tgetX() {\r\n\t\treturn this.r * Math.sin(this.tha);\r\n\t}\r\n\r\n\tgetY() {\r\n\t\treturn -this.r * Math.cos(this.tha);\r\n\t}\r\n\r\n\tnormalize() {\r\n\t\tthis.r = 1;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tequals(v) {\r\n\t\treturn ((v.r === this.r) && (v.tha === this.tha));\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.r = 0.0;\r\n\t\tthis.tha = 0.0;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tclone() {\r\n\t\treturn new Polar2D(this.r, this.tha);\r\n\t}\r\n}","export default {\r\n\tcreate(mat3) {\r\n\t\tconst mat = new Float32Array(9);\r\n\t\tif (mat3) this.set(mat3, mat);\r\n\r\n\t\treturn mat;\r\n\t},\r\n\r\n\tset(mat1, mat2) {\r\n\t\tfor (let i = 0; i < 9; i++)\r\n\t\t\tmat2[i] = mat1[i];\r\n\r\n\t\treturn mat2;\r\n\t},\r\n\r\n\tmultiply(mat, mat2, mat3) {\r\n\t\tlet a00 = mat[0], a01 = mat[1], a02 = mat[2], a10 = mat[3], a11 = mat[4], a20 = mat[6], a21 = mat[7], b00 = mat2[0], b01 = mat2[1], b02 = mat2[2], b10 = mat2[3], b11 = mat2[4], b20 = mat2[6], b21 = mat2[7];\r\n\r\n\t\tmat3[0] = b00 * a00 + b01 * a10;\r\n\t\tmat3[1] = b00 * a01 + b01 * a11;\r\n\t\tmat3[2] = a02 * b02;\r\n\t\tmat3[3] = b10 * a00 + b11 * a10;\r\n\t\tmat3[4] = b10 * a01 + b11 * a11;\r\n\t\tmat3[6] = b20 * a00 + b21 * a10 + a20;\r\n\t\tmat3[7] = b20 * a01 + b21 * a11 + a21;\r\n\r\n\t\treturn mat3;\r\n\t},\r\n\r\n\tinverse(mat, mat3) {\r\n\t\tlet a00 = mat[0], a01 = mat[1], a10 = mat[3], a11 = mat[4], a20 = mat[6], a21 = mat[7], b01 = a11, b11 = -a10, b21 = a21 * a10 - a11 * a20, d = a00 * b01 + a01 * b11, id;\r\n\r\n\t\tid = 1 / d;\r\n\t\tmat3[0] = b01 * id;\r\n\t\tmat3[1] = (-a01) * id;\r\n\t\tmat3[3] = b11 * id;\r\n\t\tmat3[4] = a00 * id;\r\n\t\tmat3[6] = b21 * id;\r\n\t\tmat3[7] = (-a21 * a00 + a01 * a20) * id;\r\n\r\n\t\treturn mat3;\r\n\t},\r\n\r\n\tmultiplyVec2(m, vec, mat3) {\r\n\t\tlet x = vec[0], y = vec[1];\r\n\r\n\t\tmat3[0] = x * m[0] + y * m[3] + m[6];\r\n\t\tmat3[1] = x * m[1] + y * m[4] + m[7];\r\n\r\n\t\treturn mat3;\r\n\t}\r\n}","import Span from './Span';\r\nimport Util from '../utils/Util';\r\nimport MathUtils from './MathUtils';\r\n\r\nexport default class ArraySpan extends Span {\r\n\r\n    constructor(color) {\r\n        super();\r\n        this._arr = Util.isArray(color) ? color : [color];\r\n    }\r\n\r\n    getValue() {\r\n        const color = this._arr[Math.floor(this._arr.length * Math.random())];\r\n        return color === 'random' || color === 'Random' ? MathUtils.randomColor() : color;\r\n    }\r\n\r\n    /**\r\n     * Make sure that the color is an instance of Proton.ArraySpan, if not it makes a new instance\r\n     *\r\n     * @method setSpanValue\r\n     * @memberof Proton#Proton.Color\r\n     * @instance\r\n     *\r\n     * @param {Proton.Particle} particle\r\n     * @param {Number} the integrate time 1/ms\r\n     * @param {Int} the particle index\r\n     */\r\n    static createArraySpan(arr) {\r\n        if (!arr) return null;\r\n\r\n        if (arr instanceof ArraySpan)\r\n            return arr;\r\n        else\r\n            return new ArraySpan(arr);\r\n    }\r\n\r\n}","export default class Rectangle {\r\n\r\n\tconstructor(x, y, w, h) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\tthis.width = w;\r\n\t\tthis.height = h;\r\n\r\n\t\tthis.bottom = this.y + this.height;\r\n\t\tthis.right = this.x + this.width;\r\n\t}\r\n\r\n\tcontains(x, y) {\r\n\t\tif (x <= this.right && x >= this.x && y <= this.bottom && y >= this.y)\r\n\t\t\treturn true;\r\n\t\telse\r\n\t\t\treturn false;\r\n\t}\r\n}\r\n","import Util from '../utils/Util';\r\n\r\nexport default class Rate {\r\n\r\n\t/**\r\n\t * The number of particles per second emission (a [particle]/b [s]);\r\n\t * @namespace\r\n\t * @memberof! Proton#\r\n\t * @constructor\r\n\t * @alias Rate\r\n\t *\r\n\t * @param {Array | Number | Span} numpan the number of each emission;\r\n\t * @param {Array | Number | Span} timepan the time of each emission;\r\n\t * for example: new Rate(new Span(10, 20), new Span(.1, .25));\r\n\t */\r\n\tconstructor(numpan, timepan) {\r\n\t\tthis.numPan = Util.setSpanValue(Util.initValue(numpan, 1));\r\n\t\tthis.timePan = Util.setSpanValue(Util.initValue(timepan, 1));\r\n\r\n\t\tthis.startTime = 0;\r\n\t\tthis.nextTime = 0;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.startTime = 0;\r\n\t\tthis.nextTime = this.timePan.getValue();\r\n\t}\r\n\r\n\tgetValue(time) {\r\n\t\tthis.startTime += time;\r\n\r\n\t\tif (this.startTime >= this.nextTime) {\r\n\t\t\tthis.startTime = 0;\r\n\t\t\tthis.nextTime = this.timePan.getValue();\r\n\r\n\t\t\tif (this.numPan.b == 1) {\r\n\t\t\t\tif (this.numPan.getValue(false) > 0.5)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\telse\r\n\t\t\t\t\treturn 0;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.numPan.getValue(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t}\r\n}","export default class Initialize {\r\n\t\r\n\treset() {\r\n\t}\r\n\r\n\tinit(emitter, particle) {\r\n\t\tif (particle) {\r\n\t\t\tthis.initialize(particle);\r\n\t\t} else {\r\n\t\t\tthis.initialize(emitter);\r\n\t\t}\r\n\t};\r\n\r\n\t///sub class init\r\n\tinitialize(target) {\r\n\t};\r\n}","import Util from '../utils/Util';\r\nimport Initialize from './Initialize';\r\n\r\nexport default class Life extends Initialize {\r\n\r\n\tconstructor(a, b, c) {\r\n\t\tsuper();\r\n\r\n\t\tthis.lifePan = Util.setSpanValue(a, b, c);\r\n\t\tthis.name = 'Life';\r\n\t}\r\n\r\n\tinitialize(target) {\r\n\t\tif (this.lifePan.a == Infinity)\r\n\t\t\ttarget.life = Infinity;\r\n\t\telse\r\n\t\t\ttarget.life = this.lifePan.getValue();\r\n\t}\r\n}\r\n","import Vector2D from '../math/Vector2D';\r\n\r\nexport default class Zone {\r\n\tconstructor() {\r\n\t\tthis.vector = new Vector2D(0, 0);\r\n\t\tthis.random = 0;\r\n\t\tthis.crossType = \"dead\";\r\n\t\tthis.alert = true;\r\n\t}\r\n\r\n\tgetPosition() {\r\n\t}\r\n\r\n\tcrossing(particle) {\r\n\t}\r\n}","import Zone from './Zone';\r\n\r\nexport default class PointZone extends Zone {\r\n\r\n\tconstructor(x, y) {\r\n\t\tsuper();\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tgetPosition() {\r\n\t\tthis.vector.x = this.x;\r\n\t\tthis.vector.y = this.y;\r\n\r\n\t\treturn this.vector;\r\n\t}\r\n\r\n\tcrossing(particle) {\r\n\t\t\r\n\t\tif (this.alert) {\r\n\t\t\talert('Sorry PointZone does not support crossing method');\r\n\t\t\tthis.alert = false;\r\n\t\t}\r\n\t}\r\n}","import Util from '../utils/Util';\r\nimport PointZone from '../zone/PointZone';\r\nimport Initialize from './Initialize';\r\n\r\nexport default class Position extends Initialize {\r\n\r\n\tconstructor(zone) {\r\n\t\tsuper();\r\n\t\tthis.zone = Util.initValue(zone, new PointZone());\r\n\r\n\t\tthis.name = 'Position';\r\n\t}\r\n\r\n\treset(zone) {\r\n\t\tthis.zone = Util.initValue(zone, new PointZone());\r\n\t}\r\n\r\n\tinitialize(target) {\r\n\t\tthis.zone.getPosition();\r\n\r\n\t\ttarget.p.x = this.zone.vector.x;\r\n\t\ttarget.p.y = this.zone.vector.y;\r\n\t};\r\n\r\n}\r\n","import Proton from '../core/Proton';\r\nimport Util from '../utils/Util';\r\nimport Polar2D from '../math/Polar2D';\r\nimport MathUtils from '../math/MathUtils';\r\nimport Initialize from './Initialize';\r\n\r\nexport default class Velocity extends Initialize {\r\n\r\n    constructor(rpan, thapan, type) {\r\n        super();\r\n\r\n        this.rPan = Util.setSpanValue(rpan);\r\n        this.thaPan = Util.setSpanValue(thapan);\r\n        this.type = Util.initValue(type, 'vector');\r\n\r\n        this.name = 'Velocity';\r\n    }\r\n\r\n    reset(rpan, thapan, type) {\r\n        this.rPan = Util.setSpanValue(rpan);\r\n        this.thaPan = Util.setSpanValue(thapan);\r\n        this.type = Util.initValue(type, 'vector');\r\n    };\r\n\r\n    normalizeVelocity(vr) {\r\n        return vr * Proton.MEASURE;\r\n    }\r\n\r\n    initialize(target) {\r\n        if (this.type == 'p' || this.type == 'P' || this.type == 'polar') {\r\n            const polar2d = new Polar2D(this.normalizeVelocity(this.rPan.getValue()), this.thaPan.getValue() * MathUtils.PI_180);\r\n\r\n            target.v.x = polar2d.getX();\r\n            target.v.y = polar2d.getY();\r\n        } else {\r\n            target.v.x = this.normalizeVelocity(this.rPan.getValue());\r\n            target.v.y = this.normalizeVelocity(this.thaPan.getValue());\r\n        }\r\n    };\r\n}","import Util from '../utils/Util';\r\nimport Initialize from './Initialize';\r\n\r\nexport default class Mass extends Initialize {\r\n\r\n\tconstructor(a, b, c) {\r\n\t\tsuper();\r\n\t\tthis.massPan = Util.setSpanValue(a, b, c);\r\n\t\tthis.name = 'Mass';\r\n\t}\r\n\r\n\tinitialize(target) {\r\n\t\ttarget.mass = this.massPan.getValue();\r\n\t}\r\n}","import Util from '../utils/Util';\r\nimport Initialize from './Initialize';\r\n\r\nexport default class Radius extends Initialize {\r\n\r\n\tconstructor(a, b, c) {\r\n\t\tsuper();\r\n\t\tthis.radius = Util.setSpanValue(a, b, c);\r\n\r\n\t\tthis.name = 'Radius';\r\n\t}\r\n\r\n\treset(a, b, c) {\r\n\t\tthis.radius = Util.setSpanValue(a, b, c);\r\n\t};\r\n\r\n\tinitialize(particle) {\r\n\t\tparticle.radius = this.radius.getValue();\r\n\t\tparticle.transform.oldRadius = particle.radius;\r\n\t};\r\n}","import Util from '../utils/Util';\r\nimport ArraySpan from '../math/ArraySpan';\r\nimport Initialize from './Initialize';\r\n\r\nexport default class Body extends Initialize {\r\n\r\n    constructor(image, w, h) {\r\n        super();\r\n\r\n        this.image = this.setSpanValue(image);\r\n        this.w = Util.initValue(w, 20);\r\n        this.h = Util.initValue(h, this.w);\r\n        this.name = 'Body';\r\n    }\r\n\r\n    initialize(particle) {\r\n        const imagetarget = this.image.getValue();\r\n\r\n        if (typeof(imagetarget) == 'string') {\r\n            particle.body = { width: this.w, height: this.h, src: imagetarget , isInner: true, inner: true };\r\n        } else {\r\n            particle.body = imagetarget;\r\n        }\r\n    };\r\n\r\n    setSpanValue(color) {\r\n        return color instanceof ArraySpan ? color : new ArraySpan(color);\r\n    }\r\n}","import Proton from '../core/Proton';\r\nimport Util from '../utils/Util';\r\nimport ease from '../math/ease';\r\n\r\nexport default class Behaviour {\r\n    static id = 0;\r\n\r\n    /**\r\n     * The Behaviour class is the base for the other Behaviour\r\n     *\r\n     * @memberof! -\r\n     * @interface\r\n     * @alias Proton.Behaviour\r\n     *\r\n     * @param {Number} life \tthe behaviours life\r\n     * @param {String} easing \tThe behaviour's decaying trend, for example ease.easeOutQuart\r\n     *\r\n     * @property {String}  id \t\tThe behaviours id\r\n     * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n     * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n     * @property {Number}  age=0 \tHow long the particle should be 'alife'\r\n     * @property {Number}  energy=1\r\n     * @property {Boolean} dead=false The particle is dead at first\r\n     * @property {Array}   parents \tThe behaviour's parents array\r\n     * @property {String}  name \tThe behaviour name\r\n     */\r\n    constructor(life, easing) {\r\n\r\n        this.life = Util.initValue(life, Infinity);\r\n        this.easing = ease.getEasing(easing);\r\n\r\n        this.age = 0;\r\n        this.energy = 1;\r\n        this.dead = false;\r\n        this.parents = [];\r\n\r\n        this.id = `Behaviour_${Behaviour.id++}`;\r\n        this.name = 'Behaviour';\r\n    }\r\n\r\n    /**\r\n     * Reset this behaviour's parameters\r\n     *\r\n     * @method reset\r\n     * @memberof Proton.Behaviour\r\n     * @instance\r\n     *\r\n     * @param {Number} [life=Infinity] \t\tthis behaviour's life\r\n     * @param {String} [easing=easeLinear] \tthis behaviour's easing\r\n     */\r\n    reset(life, easing) {\r\n        this.life = Util.initValue(life, Infinity);\r\n        this.easing = ease.getEasing(easing);\r\n    }\r\n\r\n    /**\r\n     * Normalize a force by 1:100;\r\n     *\r\n     * @method normalizeForce\r\n     * @memberof Proton.Behaviour\r\n     * @instance\r\n     *\r\n     * @param {Proton.Vector2D} force \r\n     */\r\n    normalizeForce(force) {\r\n        return force.multiplyScalar(Proton.MEASURE);\r\n    }\r\n\r\n    /**\r\n     * Normalize a value by 1:100;\r\n     *\r\n     * @method normalizeValue\r\n     * @memberof Proton.Behaviour\r\n     * @instance\r\n     *\r\n     * @param {Number} value\r\n     */\r\n    normalizeValue(value) {\r\n        return value * Proton.MEASURE;\r\n    }\r\n\r\n    /**\r\n     * Initialize the behaviour's parameters for all particles\r\n     *\r\n     * @method initialize\r\n     * @memberof Proton.Behaviour\r\n     * @instance\r\n     *\r\n     * @param {Proton.Particle} particle\r\n     */\r\n    initialize(particle) {}\r\n\r\n    /**\r\n     * Apply this behaviour for all particles every time\r\n     *\r\n     * @method applyBehaviour\r\n     * @memberof Proton.Behaviour\r\n     * @instance\r\n     *\r\n     * @param {Proton.Particle} particle\r\n     * @param {Number} \t\t\ttime the integrate time 1/ms\r\n     * @param {Int} \t\t\tindex the particle index\r\n     */\r\n    calculate(particle, time, index) {\r\n        this.age += time;\r\n\r\n        if (this.age >= this.life || this.dead) {\r\n            this.energy = 0;\r\n            this.dead = true;\r\n            this.destroy();\r\n        } else {\r\n            const scale = this.easing(particle.age / particle.life);\r\n            this.energy = Math.max(1 - scale, 0);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Destory this behaviour\r\n     *\r\n     * @method destroy\r\n     * @memberof Proton.Behaviour\r\n     * @instance\r\n     */\r\n    destroy() {\r\n        let i = this.parents.length;\r\n        while (i--) {\r\n            this.parents[i].removeBehaviour(this);\r\n        }\r\n\r\n        this.parents.length = 0;\r\n    }\r\n}","import Util from '../utils/Util';\r\nimport Vector2D from '../math/Vector2D';\r\nimport Behaviour from './Behaviour';\r\n\r\nexport default class Force extends Behaviour {\r\n\r\n\t/**\r\n\t * @memberof! Proton#\r\n\t * @augments Proton.Behaviour\r\n\t * @constructor\r\n\t * @alias Proton.Force\r\n\t *\r\n\t * @param {Number} fx\r\n\t * @param {Number} fy\r\n\t * @param {Number} [life=Infinity] \t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t *\r\n\t * @property {String} name The Behaviour name\r\n\t */\r\n\tconstructor(fx, fy, life, easing) {\r\n\t\tsuper(life, easing);\r\n\r\n\t\tthis.force = this.normalizeForce(new Vector2D(fx, fy));\r\n\t\tthis.name = \"Force\";\r\n\t}\r\n\r\n\t/**\r\n\t * Reset this behaviour's parameters\r\n\t *\r\n\t * @method reset\r\n\t * @memberof Proton#Proton.Force\r\n\t * @instance\r\n\t *\r\n\t * @param {Number} fx\r\n\t * @param {Number} fy\r\n\t * @param {Number} [life=Infinity] \t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t */\r\n\treset(fx, fy, life, easing) {\r\n\t\tthis.force = this.normalizeForce(new Vector2D(fx, fy));\r\n\r\n\t\tlife && super.reset(life, easing);\r\n\t}\r\n\r\n\t/**\r\n\t * Apply this behaviour for all particles every time\r\n\t *\r\n\t * @method applyBehaviour\r\n\t * @memberof Proton#Proton.Force\r\n\t * @instance\r\n\t *\r\n\t * @param {Proton.Particle} particle\r\n\t * @param {Number} the integrate time 1/ms\r\n\t * @param {Int} the particle index\r\n\t */\r\n\tapplyBehaviour(particle, time, index) {\r\n\t\tthis.calculate(particle, time, index);\r\n\t\tparticle.a.add(this.force);\r\n\t}\r\n}","import Util from '../utils/Util';\r\nimport Vector2D from '../math/Vector2D';\r\nimport Behaviour from './Behaviour';\r\n\r\nexport default class Attraction extends Behaviour {\r\n\r\n\t/**\r\n\t * This behaviour let the particles follow one specific Proton.Vector2D\r\n\t *\r\n\t * @memberof! Proton#\r\n\t * @augments Proton.Behaviour\r\n\t * @constructor\r\n\t * @alias Proton.Attraction\r\n\t *\r\n\t * @todo add description for 'force' and 'radius'\r\n\t *\r\n\t * @param {Proton.Vector2D} targetPosition the attraction point coordinates\r\n\t * @param {Number} [force=100]\r\n\t * @param {Number} [radius=1000]\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t *\r\n\t * @property {Proton.Vector2D} targetPosition\r\n\t * @property {Number} radius\r\n\t * @property {Number} force\r\n\t * @property {Number} radiusSq\r\n\t * @property {Proton.Vector2D} attractionForce\r\n\t * @property {Number} lengthSq\r\n\t * @property {String} name The Behaviour name\r\n\t */\r\n\tconstructor(targetPosition, force, radius, life, easing) {\r\n\t\tsuper(life, easing);\r\n\r\n\t\tthis.targetPosition = Util.initValue(targetPosition, new Vector2D);\r\n\t\tthis.radius = Util.initValue(radius, 1000);\r\n\t\tthis.force = Util.initValue(this.normalizeValue(force), 100);\r\n\r\n\t\tthis.radiusSq = this.radius * this.radius\r\n\t\tthis.attractionForce = new Vector2D();\r\n\t\tthis.lengthSq = 0;\r\n\r\n\t\tthis.name = \"Attraction\";\r\n\t}\r\n\r\n\t/**\r\n\t * Reset this behaviour's parameters\r\n\t *\r\n\t * @method reset\r\n\t * @memberof Proton#Proton.Attraction\r\n\t * @instance\r\n\t *\r\n\t * @todo add description for 'force' and 'radius'\r\n\t *\r\n\t * @param {Proton.Vector2D} targetPosition the attraction point coordinates\r\n\t * @param {Number} [force=100]\r\n\t * @param {Number} [radius=1000]\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t */\r\n\treset(targetPosition, force, radius, life, easing) {\r\n\t\tthis.targetPosition = Util.initValue(targetPosition, new Vector2D);\r\n\t\tthis.radius = Util.initValue(radius, 1000);\r\n\t\tthis.force = Util.initValue(this.normalizeValue(force), 100);\r\n\r\n\t\tthis.radiusSq = this.radius * this.radius\r\n\t\tthis.attractionForce = new Vector2D();\r\n\t\tthis.lengthSq = 0;\r\n\r\n\t\tlife && super.reset(life, easing);\r\n\t}\r\n\r\n\t/**\r\n\t * Apply this behaviour for all particles every time\r\n\t *\r\n\t * @memberof Proton#Proton.Attraction\r\n\t * @method applyBehaviour\r\n\t * @instance\r\n\t *\r\n\t * @param {Proton.Particle} particle\r\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\r\n\t * @param {Int} \t\t\tindex the particle index\r\n\t */\r\n\tapplyBehaviour(particle, time, index) {\r\n\t\tthis.calculate(particle, time, index);\r\n\r\n\t\tthis.attractionForce.copy(this.targetPosition);\r\n\t\tthis.attractionForce.sub(particle.p);\r\n\t\tthis.lengthSq = this.attractionForce.lengthSq();\r\n\r\n\t\tif (this.lengthSq > 0.000004 && this.lengthSq < this.radiusSq) {\r\n\t\t\tthis.attractionForce.normalize();\r\n\t\t\tthis.attractionForce.multiplyScalar(1 - this.lengthSq / this.radiusSq);\r\n\t\t\tthis.attractionForce.multiplyScalar(this.force);\r\n\r\n\t\t\tparticle.a.add(this.attractionForce);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n","import Util from '../utils/Util';\r\nimport Vector2D from '../math/Vector2D';\r\nimport MathUtils from '../math/MathUtils';\r\nimport Behaviour from './Behaviour';\r\n\r\nexport default class RandomDrift extends Behaviour {\r\n\r\n\t/**\r\n\t * @memberof! Proton#\r\n\t * @augments Behaviour\r\n\t * @constructor\r\n\t * @alias RandomDrift\r\n\t *\r\n\t * @param {Number} driftX \t\t\t\tX value of the new Vector2D\r\n\t * @param {Number} driftY  \t\t\t\tY value of the new Vector2D\r\n\t * @param {Number} delay \t\t\t\tHow much delay the drift should have\r\n\t * @param {Number} [life=Infinity] \t\tthis behaviour's life\r\n\t * @param {String} [easing=easeLinear] \tthis behaviour's easing\r\n\t *\r\n\t * @property {Number} time The time of the drift\r\n\t * @property {String} name The Behaviour name\r\n\t */\r\n\tconstructor(driftX, driftY, delay, life, easing) {\r\n\t\tsuper(life, easing);\r\n\r\n\t\tthis.reset(driftX, driftY, delay);\r\n\t\tthis.time = 0;\r\n\t\tthis.name = \"RandomDrift\";\r\n\t}\r\n\r\n\t/**\r\n\t * Reset this behaviour's parameters\r\n\t *\r\n\t * @method reset\r\n\t * @memberof Proton#RandomDrift\r\n\t * @instance\r\n\t *\r\n\t * @param {Number} driftX \t\t\t\tX value of the new Vector2D\r\n\t * @param {Number} driftY  \t\t\t\tY value of the new Vector2D\r\n\t * @param {Number} delay \t\t\t\tHow much delay the drift should have\r\n\t * @param {Number} [life=Infinity] \t\tthis behaviour's life\r\n\t * @param {String} [easing=easeLinear] \tthis behaviour's easing\r\n\t */\r\n\treset(driftX, driftY, delay, life, easing) {\r\n\t\tthis.panFoce = new Vector2D(driftX, driftY);\r\n\t\tthis.panFoce = this.normalizeForce(this.panFoce);\r\n\t\tthis.delay = delay;\r\n\r\n\t\tlife && super.reset(life, easing);\r\n\t}\r\n\r\n\t/**\r\n\t * Apply this behaviour for all particles every time\r\n\t *\r\n\t * @method applyBehaviour\r\n\t * @memberof Proton#RandomDrift\r\n\t * @instance\r\n\t *\r\n\t * @param {Particle} particle\r\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\r\n\t * @param {Int} \t\t\tindex the particle index\r\n\t */\r\n\tapplyBehaviour(particle, time, index) {\r\n\t\tthis.calculate(particle, time, index);\r\n\t\tthis.time += time;\r\n\r\n\t\tif (this.time >= this.delay) {\r\n\t\t\tparticle.a.addXY(MathUtils.randomAToB(-this.panFoce.x, this.panFoce.x), MathUtils.randomAToB(-this.panFoce.y, this.panFoce.y));\r\n\t\t\tthis.time = 0;\r\n\t\t};\r\n\t}\r\n}\r\n","import Util from '../utils/Util';\r\nimport Vector2D from '../math/Vector2D';\r\nimport Force from './Force';\r\n\r\nexport default class Gravity extends Force {\r\n\r\n\t/**\r\n\t * @memberof! Proton#\r\n\t * @augments Proton#Proton.Force\r\n\t * @constructor\r\n\t * @alias Proton.Gravity\r\n\t *\r\n\t * @param {Number} g \t\t\t\t\t\t\tGravity\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t *\r\n\t * @property {String} name The Behaviour name\r\n\t */\r\n\tconstructor(g, life, easing) {\r\n\t\tsuper(0, g, life, easing);\r\n\t\tthis.name = \"Gravity\";\r\n\t}\r\n\r\n\t/**\r\n\t * Reset this behaviour's parameters\r\n\t *\r\n\t * @method reset\r\n\t * @memberof Proton#Proton.Gravity\r\n\t * @instance\r\n\t *\r\n\t * @param {Number} g \t\t\t\t\t\t\tGravity\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t */\r\n\treset(g, life, easing) {\r\n\t\tsuper.reset(0, g, life, easing);\r\n\t}\r\n}","import Util from '../utils/Util';\r\nimport Vector2D from '../math/Vector2D';\r\nimport Behaviour from './Behaviour';\r\n\r\n//can use Collision(emitter,true,function(){}) or Collision();\r\nexport default class Collision extends Behaviour {\r\n\r\n\t/**\r\n\t * The callback after collision\r\n\t *\r\n\t * @callback Callback\r\n\t *\r\n\t * @param {Proton.Particle} particle\r\n\t * @param {Proton.Paritcle} otherParticle\r\n\t */\r\n\t/**\r\n\t * @memberof! Proton#\r\n\t * @augments Proton.Behaviour\r\n\t * @constructor\r\n\t * @alias Proton.Collision\r\n\t *\r\n\t * @todo add description to mass\r\n\t *\r\n\t * @param {Proton.Emitter} \t[emitter=null] \t\tthe attraction point coordinates\r\n\t * @param {Boolean} \t\t[mass=true]\t\t\t\r\n\t * @param {Callback}\t \t[callback=null]\t\tthe callback after the collision\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t *\r\n\t * @property {String} name The Behaviour name\r\n\t */\r\n\tconstructor(emitter, mass, callback, life, easing) {\r\n\t\tsuper(life, easing);\r\n\r\n\t\tthis.reset(emitter, mass, callback);\r\n\t\tthis.name = \"Collision\";\r\n\t}\r\n\r\n\t/**\r\n\t * Reset this behaviour's parameters\r\n\t *\r\n\t * @memberof Proton#Proton.Collision\r\n\t * @method reset\r\n\t * @instance\r\n\t *\r\n\t * @todo add description to mass\r\n\t *\r\n\t * @param {Proton.Emitter} \t[emitter=null] \t\tthe attraction point coordinates\r\n\t * @param {Boolean} \t\t[mass=true]\t\t\t\r\n\t * @param {Callback}\t \t[callback=null]\t\tthe callback after the collision\r\n\t * @param {Number} \t\t\t[life=Infinity] \tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t */\r\n\treset(emitter, mass, callback, life, easing) {\r\n\t\tthis.emitter = Util.initValue(emitter, null);\r\n\t\tthis.mass = Util.initValue(mass, true);\r\n\t\tthis.callback = Util.initValue(callback, null);\r\n\r\n\t\tthis.collisionPool = [];\r\n\t\tthis.delta = new Vector2D();\r\n\r\n\t\tlife && super.reset(life, easing);\r\n\t}\r\n\r\n\t/**\r\n\t * Apply this behaviour for all particles every time\r\n\t *\r\n\t * @memberof Proton#Proton.Collision\r\n\t * @method applyBehaviour\r\n\t * @instance\r\n\t *\r\n\t * @param {Proton.Particle} particle\r\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\r\n\t * @param {Int} \t\t\tindex the particle index\r\n\t */\r\n\tapplyBehaviour(particle, time, index) {\r\n\t\tconst newPool = this.emitter ? this.emitter.particles.slice(index) : this.pool.slice(index);\r\n\t\tconst length = newPool.length;\r\n\r\n\t\tlet otherParticle;\r\n\t\tlet lengthSq;\r\n\t\tlet overlap;\r\n\t\tlet totalMass;\r\n\t\tlet averageMass1, averageMass2;\r\n\t\tlet i;\r\n\r\n\t\tfor (i = 0; i < length; i++) {\r\n\t\t\totherParticle = newPool[i];\r\n\r\n\t\t\tif (otherParticle !== particle) {\r\n\t\t\t\tthis.delta.copy(otherParticle.p);\r\n\t\t\t\tthis.delta.sub(particle.p);\r\n\r\n\t\t\t\tlengthSq = this.delta.lengthSq();\r\n\t\t\t\tconst distance = particle.radius + otherParticle.radius;\r\n\r\n\t\t\t\tif (lengthSq <= distance * distance) {\r\n\t\t\t\t\toverlap = distance - Math.sqrt(lengthSq);\r\n\t\t\t\t\toverlap += 0.5;\r\n\r\n\t\t\t\t\ttotalMass = particle.mass + otherParticle.mass;\r\n\t\t\t\t\taverageMass1 = this.mass ? otherParticle.mass / totalMass : 0.5;\r\n\t\t\t\t\taverageMass2 = this.mass ? particle.mass / totalMass : 0.5;\r\n\t\t\t\t\t\r\n\t\t\t\t\tparticle.p.add(this.delta.clone().normalize().multiplyScalar(overlap * -averageMass1));\r\n\t\t\t\t\totherParticle.p.add(this.delta.normalize().multiplyScalar(overlap * averageMass2));\r\n\r\n\t\t\t\t\tthis.callback && this.callback(particle, otherParticle);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n","import Util from '../utils/Util';\r\nimport Behaviour from './Behaviour';\r\n\r\nexport default class CrossZone extends Behaviour {\r\n\r\n    /**\r\n     * Defines what happens if the particles come to the end of the specified zone\r\n     *\r\n     * @memberof! Proton#\r\n     * @augments Proton.Behaviour\r\n     * @constructor\r\n     * @alias Proton.CrossZone\r\n     *\r\n     * @param {Proton.Zone} zone \t\t\t\t\t\tcan be any Proton.Zone - e.g. Proton.RectZone()\r\n     * @param {String} \t\t[crossType=dead] \t\t\twhat happens if the particles pass the zone - allowed strings: dead | bound | cross\r\n     * @param {Number} \t\t[life=Infinity] \t\t\tthis behaviour's life\r\n     * @param {String} \t\t[easing=ease.easeLinear] \tthis behaviour's easing\r\n     *\r\n     * @property {String} name The Behaviour name\r\n     */\r\n    constructor(zone, crossType, life, easing) {\r\n        super(life, easing);\r\n\r\n        this.reset(zone, crossType);\r\n        this.name = \"CrossZone\";\r\n    }\r\n\r\n    /**\r\n     * Reset this behaviour's parameters\r\n     *\r\n     * @method reset\r\n     * @memberof Proton#Proton.CrossZone\r\n     * @instance\r\n     *\r\n     * @param {Proton.Zone} zone \t\t\t\tcan be any Proton.Zone - e.g. Proton.RectZone()\r\n     * @param {String} \t\t[crossType=dead] \twhat happens if the particles pass the zone - allowed strings: dead | bound | cross\r\n     * @param {Number} \t\t[life=Infinity] \tthis behaviour's life\r\n     * @param {String} \t\t[easing=easeLinear]\tthis behaviour's easing\r\n     */\r\n    reset(zone, crossType, life, easing) {\r\n        this.zone = zone;\r\n        this.zone.crossType = Util.initValue(crossType, \"dead\");\r\n\r\n        life && super.reset(life, easing);\r\n    }\r\n\r\n    /**\r\n     * Apply this behaviour for all particles every time\r\n     *\r\n     * @method applyBehaviour\r\n     * @memberof Proton#Proton.CrossZone\r\n     * @instance\r\n     *\r\n     * @param {Proton.Particle} particle\r\n     * @param {Number} the integrate time 1/ms\r\n     * @param {Int} the particle index\r\n     */\r\n    applyBehaviour(particle, time, index) {\r\n        this.calculate(particle, time, index);\r\n        this.zone.crossing(particle);\r\n    };\r\n}","import Util from '../utils/Util';\r\nimport Behaviour from './Behaviour';\r\n\r\nexport default class Alpha extends Behaviour {\r\n\r\n\t/**\r\n\t * @memberof! Proton#\r\n\t * @augments Proton.Behaviour\r\n\t * @constructor\r\n\t * @alias Proton.Alpha\r\n\t *\r\n\t * @todo add description for 'a' and 'b'\r\n\t *\r\n\t * @param {Number} a\r\n\t * @param {String} b\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t *\r\n\t * @property {String} name The Behaviour name\r\n\t */\r\n\tconstructor(a, b, life, easing) {\r\n\t\tsuper(life, easing);\r\n\r\n\t\tthis.reset(a, b);\r\n\t\tthis.name = \"Alpha\";\r\n\t}\r\n\r\n\t/**\r\n\t * Reset this behaviour's parameters\r\n\t *\r\n\t * @method reset\r\n\t * @memberof Proton#Proton.Alpha\r\n\t * @instance\r\n\t *\r\n\t * @todo add description for 'a' and 'b'\r\n\t *\r\n\t * @param {Number} a\r\n\t * @param {String} b\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t */\r\n\treset(a, b, life, easing) {\r\n\t\tthis.same = b === null || b === undefined ? true : false;\r\n\t\tthis.a = Util.setSpanValue(Util.initValue(a, 1));\r\n\t\tthis.b = Util.setSpanValue(b);\r\n\r\n\t\tlife && super.reset(life, easing);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets the new alpha value of the particle\r\n\t *\r\n\t * @method initialize\r\n\t * @memberof Proton#Proton.Alpha\r\n\t * @instance\r\n\t *\r\n\t * @param {Proton.Particle} particle A single Proton generated particle\r\n\t */\r\n\tinitialize(particle) {\r\n\t\tparticle.transform.alphaA = this.a.getValue();\r\n\r\n\t\tif (this.same)\r\n\t\t\tparticle.transform.alphaB = particle.transform.alphaA;\r\n\t\telse\r\n\t\t\tparticle.transform.alphaB = this.b.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * @method applyBehaviour\r\n\t * @memberof Proton#Proton.Alpha\r\n\t * @instance\r\n\t *\r\n\t * @param {Proton.Particle} particle\r\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\r\n\t * @param {Int} \t\t\tindex the particle index\r\n \t */\r\n\tapplyBehaviour(particle, time, index) {\r\n\t\tthis.calculate(particle, time, index);\r\n\t\t\r\n\t\tparticle.alpha = particle.transform.alphaB + (particle.transform.alphaA - particle.transform.alphaB) * this.energy;\r\n\t\tif (particle.alpha < 0.001) particle.alpha = 0;\r\n\t}\r\n}\r\n","import Util from '../utils/Util';\r\nimport Behaviour from './Behaviour';\r\n\r\nexport default class Scale extends Behaviour {\r\n\r\n\t/**\r\n\t * @memberof! Proton#\r\n\t * @augments Proton.Behaviour\r\n\t * @constructor\r\n\t * @alias Proton.Scale\r\n\t *\r\n\t * @todo add description for 'a' and 'b'\r\n\t *\r\n\t * @param {Number} a\r\n\t * @param {String} b\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t *\r\n\t * @property {String} name The Behaviour name\r\n\t */\r\n\tconstructor(a, b, life, easing) {\r\n\t\tsuper(life, easing);\r\n\r\n\t\tthis.reset(a, b);\r\n\t\tthis.name = \"Scale\";\r\n\t}\r\n\r\n\t/**\r\n\t * Reset this behaviour's parameters\r\n\t *\r\n\t * @method reset\r\n\t * @memberof Proton#Proton.Scale\r\n\t * @instance\r\n\t *\r\n\t * @param {Number} a\r\n\t * @param {String} b\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t */\r\n\treset(a, b, life, easing) {\r\n\t\tthis.same = b === null || b === undefined ? true : false;\r\n\t\tthis.a = Util.setSpanValue(Util.initValue(a, 1));\r\n\t\tthis.b = Util.setSpanValue(b);\r\n\r\n\t\tlife && super.reset(life, easing);\r\n\t}\r\n\r\n\t/**\r\n\t * Initialize the behaviour's parameters for all particles\r\n\t *\r\n\t * @method initialize\r\n\t * @memberof Proton#Proton.Scale\r\n\t * @instance\r\n\t *\r\n\t * @param {Proton.Particle} particle\r\n\t */\r\n\tinitialize(particle) {\r\n\t\tparticle.transform.scaleA = this.a.getValue();\r\n\t\tparticle.transform.oldRadius = particle.radius;\r\n\t\tparticle.transform.scaleB = this.same ? particle.transform.scaleA : this.b.getValue();\r\n\t};\r\n\r\n\t/**\r\n\t * Apply this behaviour for all particles every time\r\n\t *\r\n\t * @method applyBehaviour\r\n\t * @memberof Proton#Proton.Scale\r\n\t * @instance\r\n\t *\r\n\t * @param {Proton.Particle} particle\r\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\r\n\t * @param {Int} \t\t\tindex the particle index\r\n\t */\r\n\tapplyBehaviour(particle, time, index) {\r\n\t\tthis.calculate(particle, time, index);\r\n\t\tparticle.scale = particle.transform.scaleB + (particle.transform.scaleA - particle.transform.scaleB) * this.energy;\r\n\r\n\t\tif (particle.scale < 0.0001) particle.scale = 0;\r\n\t\tparticle.radius = particle.transform.oldRadius * particle.scale;\r\n\t}\r\n}","import Util from '../utils/Util';\r\nimport Behaviour from './Behaviour';\r\n\r\nexport default class Rotate extends Behaviour {\r\n\r\n\t/**\r\n\t * @memberof! Proton#\r\n\t * @augments Proton.Behaviour\r\n\t * @constructor\r\n\t * @alias Proton.Rotate\r\n\t *\r\n\t * @todo add description for 'a', 'b' and 'style'\r\n\t *\r\n\t * @param {String} [influence=Velocity] The rotation's influence\r\n\t * @param {String} b\r\n\t * @param {String} [style=to]\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t *\r\n\t * @property {String} name The Behaviour name\r\n\t */\r\n\tconstructor(influence, b, style, life, easing) {\r\n\t\tsuper(life, easing);\r\n\r\n\t\tthis.reset(influence, b, style);\r\n\t\tthis.name = \"Rotate\";\r\n\t}\r\n\r\n\t/**\r\n\t * Reset this behaviour's parameters\r\n\t *\r\n\t * @method reset\r\n\t * @memberof Proton#Proton.Rotate\r\n\t * @instance\r\n\t *\r\n\t * @todo add description for 'a', 'b' and 'style'\r\n\t *\r\n\t * @param {String} a\r\n\t * @param {String} b\r\n\t * @param {String} [style=to]\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t */\r\n\treset(a, b, style, life, easing) {\r\n\t\tthis.same = b === null || b === undefined ? true : false;\r\n\r\n\t\tthis.a = Util.setSpanValue(Util.initValue(a, \"Velocity\"));\r\n\t\tthis.b = Util.setSpanValue(Util.initValue(b, 0));\r\n\t\tthis.style = Util.initValue(style, 'to');\r\n\r\n\t\tlife && super.reset(life, easing);\r\n\t}\r\n\r\n\t/**\r\n\t * Initialize the behaviour's parameters for all particles\r\n\t *\r\n\t * @method initialize\r\n\t * @memberof Proton#Proton.Rotate\r\n\t * @instance\r\n\t *\r\n\t * @param {Proton.Particle} particle\r\n\t */\r\n\tinitialize(particle) {\r\n\t\tparticle.rotation = this.a.getValue();\r\n\t\tparticle.transform.rotationA = this.a.getValue();\r\n\r\n\t\tif (!this.same) particle.transform.rotationB = this.b.getValue();\r\n\t};\r\n\r\n\t/**\r\n\t * Apply this behaviour for all particles every time\r\n\t *\r\n\t * @method applyBehaviour\r\n\t * @memberof Proton#Proton.Rotate\r\n\t * @instance\r\n\t *\r\n\t * @param {Proton.Particle} particle\r\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\r\n\t * @param {Int} \t\t\tindex the particle index\r\n\t */\r\n\tapplyBehaviour(particle, time, index) {\r\n\t\tthis.calculate(particle, time, index);\r\n\r\n\t\tif (!this.same) {\r\n\t\t\tif (this.style == 'to' || this.style == 'TO' || this.style == '_') {\r\n\t\t\t\tparticle.rotation += particle.transform.rotationB + (particle.transform.rotationA - particle.transform.rotationB) * this.energy\r\n\t\t\t} else {\r\n\t\t\t\tparticle.rotation += particle.transform.rotationB;\r\n\t\t\t}\r\n\t\t} else if (this.a.a == \"V\" || this.a.a == \"Velocity\" || this.a.a == \"v\") {\r\n\t\t\t//beta...\r\n\t\t\tparticle.rotation = particle.getDirection();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import Util from '../utils/Util';\r\nimport ColorUtil from '../utils/ColorUtil';\r\nimport ArraySpan from '../math/ArraySpan';\r\nimport Behaviour from './Behaviour';\r\n\r\nexport default class Color extends Behaviour {\r\n\r\n    /**\r\n     * @memberof! Proton#\r\n     * @augments Proton.Behaviour\r\n     * @constructor\r\n     * @alias Proton.Color\r\n     *\r\n     * @param {Proton.ArraySpan | String} a the string should be a hex e.g. #000000 for black\r\n     * @param {Proton.ArraySpan | String} b the string should be a hex e.g. #000000 for black\r\n     * @param {Number} [life=Infinity] \tthis behaviour's life\r\n     * @param {String} [easing=easeLinear] \tthis behaviour's easing\r\n     *\r\n     * @property {String} name The Behaviour name\r\n     */\r\n    constructor(a, b, life, easing) {\r\n        super(life, easing);\r\n\r\n        this.reset(a, b);\r\n        this.name = \"Color\";\r\n    }\r\n\r\n    /**\r\n     * Reset this behaviour's parameters\r\n     *\r\n     * @method reset\r\n     * @memberof Proton#Proton.Color\r\n     * @instance\r\n     *\r\n     * @param {Proton.ArraySpan | String} a the string should be a hex e.g. #000000 for black\r\n     * @param {Proton.ArraySpan | String} b the string should be a hex e.g. #000000 for black\r\n     * @param {Number} [life=Infinity] \tthis behaviour's life\r\n     * @param {String} [easing=easeLinear] \tthis behaviour's easing\r\n     */\r\n    reset(a, b, life, easing) {\r\n        this.a = ArraySpan.createArraySpan(a);\r\n        this.b = ArraySpan.createArraySpan(b);\r\n\r\n        life && super.reset(life, easing);\r\n    }\r\n\r\n    /**\r\n     * Initialize the behaviour's parameters for all particles\r\n     *\r\n     * @method initialize\r\n     * @memberof Proton#Proton.Color\r\n     * @instance\r\n     *\r\n     * @param {Proton.Particle} particle\r\n     */\r\n    initialize(particle) {\r\n        particle.color = this.a.getValue();\r\n        particle.transform.colorA = ColorUtil.hexToRGB(particle.color);\r\n\r\n        if (this.b)\r\n            particle.transform.colorB = ColorUtil.hexToRGB(this.b.getValue());\r\n    };\r\n\r\n    /**\r\n     * Apply this behaviour for all particles every time\r\n     *\r\n     * @method applyBehaviour\r\n     * @memberof Proton#Proton.Color\r\n     * @instance\r\n     *\r\n     * @param {Proton.Particle} particle\r\n     * @param {Number} the integrate time 1/ms\r\n     * @param {Int} the particle index\r\n     */\r\n    applyBehaviour(particle, time, index) {\r\n        if (this.b) {\r\n            this.calculate(particle, time, index);\r\n\r\n            particle.transform.rgb.r = particle.transform.colorB.r + (particle.transform.colorA.r - particle.transform.colorB.r) * this.energy;\r\n            particle.transform.rgb.g = particle.transform.colorB.g + (particle.transform.colorA.g - particle.transform.colorB.g) * this.energy;\r\n            particle.transform.rgb.b = particle.transform.colorB.b + (particle.transform.colorA.b - particle.transform.colorB.b) * this.energy;\r\n\r\n            particle.transform.rgb.r = Math.floor(particle.transform.rgb.r);\r\n            particle.transform.rgb.g = Math.floor(particle.transform.rgb.g);\r\n            particle.transform.rgb.b = Math.floor(particle.transform.rgb.b);\r\n\r\n        } else {\r\n            particle.transform.rgb.r = particle.transform.colorA.r;\r\n            particle.transform.rgb.g = particle.transform.colorA.g;\r\n            particle.transform.rgb.b = particle.transform.colorA.b;\r\n        }\r\n    };\r\n\r\n}","import Util from '../utils/Util';\r\nimport Attraction from './Attraction';\r\n\r\nexport default class Repulsion extends Attraction {\r\n\r\n\t/**\r\n\t * The oppisite of Proton.Attraction - turns the force\r\n\t *\r\n\t * @memberof! Proton#\r\n\t * @augments Proton#Proton.Attraction\r\n\t * @constructor\r\n\t * @alias Proton.Repulsion\r\n\t *\r\n\t * @todo add description for 'force' and 'radius'\r\n\t *\r\n\t * @param {Proton.Vector2D} targetPosition the attraction point coordinates\r\n\t * @param {Number} [force=100]\r\n\t * @param {Number} [radius=1000]\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t *\r\n\t * @property {Number} force\r\n\t * @property {String} name The Behaviour name\r\n\t */\r\n\tconstructor(targetPosition, force, radius, life, easing) {\r\n\t\tsuper(targetPosition, force, radius, life, easing);\r\n\r\n\t\tthis.force *= -1;\r\n\t\tthis.name = \"Repulsion\";\r\n\t}\r\n\r\n\t/**\r\n\t * Reset this behaviour's parameters\r\n\t *\r\n\t * @method reset\r\n\t * @memberof Proton#Proton.Repulsion\r\n\t * @instance\r\n\t *\r\n\t * @todo add description for 'force' and 'radius'\r\n\t *\r\n\t * @param {Proton.Vector2D} targetPosition the attraction point coordinates\r\n\t * @param {Number} [force=100]\r\n\t * @param {Number} [radius=1000]\r\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\r\n\t */\r\n\treset(targetPosition, force, radius, life, easing) {\r\n\t\tsuper.reset(targetPosition, force, radius, life, easing);\r\n\t\tthis.force *= -1;\r\n\t}\r\n}\r\n","import Util from '../utils/Util';\r\nimport Vector2D from '../math/Vector2D';\r\nimport Behaviour from './Behaviour';\r\n\r\nexport default class GravityWell extends Behaviour {\r\n\r\n\t/**\r\n\t * @memberof! Proton#\r\n\t * @augments Behaviour\r\n\t * @constructor\r\n\t * @alias GravityWell\r\n\t *\r\n\t * @param {Vector2D} [centerPoint=new Vector2D] The point in the center\r\n\t * @param {Number} [force=100]\t\t\t\t\tThe force\t\r\n\t * @param {Number} [life=Infinity]\t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=easeLinear]\tthis behaviour's easing\r\n\t *\r\n\t * @property {String} name The Behaviour name\r\n\t */\r\n\tconstructor(centerPoint, force, life, easing) {\r\n\t\tsuper(life, easing);\r\n\r\n\t\tthis.distanceVec = new Vector2D();\r\n\t\tthis.centerPoint = Util.initValue(centerPoint, new Vector2D);\r\n\t\tthis.force = Util.initValue(this.normalizeValue(force), 100);\r\n\r\n\t\tthis.name = \"GravityWell\";\r\n\t}\r\n\r\n\t/**\r\n\t * Reset this behaviour's parameters\r\n\t *\r\n\t * @method reset\r\n\t * @memberof Proton#GravityWell\r\n\t * @instance\r\n\t *\r\n\t * @param {Vector2D} [centerPoint=new Vector2D] The point in the center\r\n\t * @param {Number} [force=100]\t\t\t\t\tThe force\t\r\n\t * @param {Number} [life=Infinity]\t\t\t\tthis behaviour's life\r\n\t * @param {String} [easing=easeLinear]\tthis behaviour's easing\r\n\t */\r\n\treset(centerPoint, force, life, easing) {\r\n\t\tthis.distanceVec = new Vector2D();\r\n\t\tthis.centerPoint = Util.initValue(centerPoint, new Vector2D);\r\n\t\tthis.force = Util.initValue(this.normalizeValue(force), 100);\r\n\t\t\r\n\t\tlife && super.reset(life, easing);\r\n\t};\r\n\r\n\t/**\r\n\t * @inheritdoc\r\n\t */\r\n\tinitialize(particle) {\r\n\t};\r\n\r\n\t/**\r\n\t * Apply this behaviour for all particles every time\r\n\t *\r\n\t * @method applyBehaviour\r\n\t * @memberof Proton#GravityWell\r\n\t * @instance\r\n\t *\r\n\t * @param {Particle} particle\r\n\t * @param {Number} the integrate time 1/ms\r\n\t * @param {Int} the particle index\r\n\t */\r\n\tapplyBehaviour(particle, time, index) {\r\n\t\tthis.distanceVec.set(this.centerPoint.x - particle.p.x, this.centerPoint.y - particle.p.y);\r\n\t\tconst distanceSq = this.distanceVec.lengthSq();\r\n\r\n\t\tif (distanceSq != 0) {\r\n\t\t\tconst distance = this.distanceVec.length();\r\n\t\t\tconst factor = (this.force * time) / (distanceSq * distance);\r\n\r\n\t\t\tparticle.v.x += factor * this.distanceVec.x;\r\n\t\t\tparticle.v.y += factor * this.distanceVec.y;\r\n\t\t}\r\n\t}\r\n}","import Util from '../utils/Util';\r\nimport Initialize from './Initialize';\r\nimport MathUtils from '../math/MathUtils';\r\n\r\nexport default {\r\n\r\n\tinitialize(emitter, particle, initializes) {\r\n\t\tconst length = initializes.length;\r\n\t\tlet i;\r\n\r\n\t\tfor (i = 0; i < length; i++) {\r\n\t\t\tif (initializes[i] instanceof Initialize)\r\n\t\t\t\tinitializes[i].init(emitter, particle);\r\n\t\t\telse\r\n\t\t\t\tthis.init(emitter, particle, initializes[i]);\r\n\t\t}\r\n\r\n\t\tthis.bindEmitter(emitter, particle);\r\n\t},\r\n\r\n\t//////////////////////init//////////////////////\r\n\tinit(emitter, particle, initialize) {\r\n\t\tUtil.setPrototypeByObject(particle, initialize);\r\n\t\tUtil.setVector2DByObject(particle, initialize);\r\n\t},\r\n\t\r\n\tbindEmitter(emitter, particle) {\r\n\t\tif (emitter.bindEmitter) {\r\n\t\t\tparticle.p.add(emitter.p);\r\n\t\t\tparticle.v.add(emitter.v);\r\n\t\t\tparticle.a.add(emitter.a);\r\n\r\n\t\t\tparticle.v.rotate(MathUtils.degreeTransform(emitter.rotation));\r\n\t\t}\r\n\t}\r\n}\r\n","import Util from '../utils/Util';\r\nimport Particle from '../core/Particle';\r\nimport EventDispatcher from '../events/EventDispatcher';\r\n\r\nimport Rate from '../initialize/Rate';\r\nimport InitializeUtil from '../initialize/InitializeUtil';\r\n\r\nexport default class Emitter extends Particle {\r\n\r\n\tstatic ID = 0;\r\n\r\n\t/**\r\n\t * You can use this emit particles.\r\n\t *\r\n\t * It will dispatch follow events:\r\n\t * PARTICLE_CREATED\r\n\t * PARTICLE_UPDATA\r\n\t * PARTICLE_DEAD\r\n\t *\r\n\t * @class Emitter\r\n\t * @constructor\r\n\t * @param {Object} pObj the parameters object;\r\n\t * for example {damping:0.01,bindEmitter:false}\r\n\t */\r\n\tconstructor(pObj) {\r\n\t\tsuper(pObj);\r\n\r\n\t\tthis.initializes = [];\r\n\t\tthis.particles = [];\r\n\t\tthis.behaviours = [];\r\n\r\n\t\tthis.emitSpeed = 0;\r\n\t\tthis.emitTime = 0;\r\n\t\tthis.totalTime = -1;\r\n\r\n\t\t/**\r\n\t\t * The friction coefficient for all particle emit by This;\r\n\t\t * @property damping\r\n\t\t * @type {Number}\r\n\t\t * @default 0.006\r\n\t\t */\r\n\t\tthis.damping = .006;\r\n\r\n\t\t/**\r\n\t\t * If bindEmitter the particles can bind this emitter's property;\r\n\t\t * @property bindEmitter\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t */\r\n\t\tthis.bindEmitter = true;\r\n\r\n\t\t/**\r\n\t\t * The number of particles per second emit (a [particle]/b [s]);\r\n\t\t * @property rate\r\n\t\t * @type {Rate}\r\n\t\t * @default Rate(1, .1)\r\n\t\t */\r\n\t\tthis.rate = new Rate(1, .1);\r\n\r\n\t\tthis.id = `emitter_${Emitter.ID++}`;\r\n\t\tthis.name = 'Emitter';\r\n\t}\r\n\r\n\t/**\r\n\t * start emit particle\r\n\t * @method emit\r\n\t * @param {Number} emitTime begin emit time;\r\n\t * @param {String} life the life of this emitter\r\n\t */\r\n\temit(totalTime, life) {\r\n\t\tthis.stoped = false;\r\n\t\tthis.emitTime = 0;\r\n\t\tthis.totalTime = Util.initValue(totalTime, Infinity);\r\n\r\n\t\tif (life == true || life == 'life' || life == 'destroy') {\r\n\t\t\tthis.life = totalTime == 'once' ? 1 : this.totalTime;\r\n\t\t} else if (!isNaN(life)) {\r\n\t\t\tthis.life = life;\r\n\t\t}\r\n\r\n\t\tthis.rate.init();\r\n\t}\r\n\r\n\t/**\r\n\t * stop emiting\r\n\t * @method stop\r\n\t */\r\n\tstop() {\r\n\t\tthis.totalTime = -1;\r\n\t\tthis.emitTime = 0;\r\n\t\tthis.stoped = true;\r\n\t}\r\n\r\n\tpreEmit(time) {\r\n\t\tlet oldStoped = this.stoped;\r\n\t\tlet oldEmitTime = this.emitTime;\r\n\t\tlet oldTotalTime = this.totalTime;\r\n\r\n\t\tthis.stoped = false;\r\n\t\tthis.emitTime = 0;\r\n\t\tthis.totalTime = time;\r\n\t\tthis.rate.init();\r\n\r\n\t\tconst step = 0.0167;\r\n\t\twhile (time > step) {\r\n\t\t\ttime -= step;\r\n\t\t\tthis.update(step);\r\n\t\t}\r\n\r\n\t\tthis.stoped = oldStoped;\r\n\t\tthis.emitTime = oldEmitTime + Math.max(time, 0);\r\n\t\tthis.totalTime = oldTotalTime;\r\n\t}\r\n\r\n\t/**\r\n\t * remove current all particles\r\n\t * @method removeAllParticles\r\n\t */\r\n\tremoveAllParticles() {\r\n\t\tlet i = this.particles.length;\r\n\t\twhile (i--) this.particles[i].dead = true;\r\n\t}\r\n\r\n\t/**\r\n\t * add initialize to this emitter\r\n\t * @method addSelfInitialize\r\n\t */\r\n\taddSelfInitialize(pObj) {\r\n\t\tif (pObj['init']) {\r\n\t\t\tpObj.init(this);\r\n\t\t} else {\r\n\t\t\tthis.initAll();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * add the Initialize to particles;\r\n\t * \r\n\t * you can use initializes array:for example emitter.addInitialize(initialize1,initialize2,initialize3);\r\n\t * @method addInitialize\r\n\t * @param {Initialize} initialize like this new Radius(1, 12)\r\n\t */\r\n\taddInitialize(...rest) {\r\n\t\tlet i = rest.length;\r\n\t\twhile (i--)\r\n\t\t\tthis.initializes.push(rest[i]);\r\n\t}\r\n\r\n\t/**\r\n\t * remove the Initialize\r\n\t * @method removeInitialize\r\n\t * @param {Initialize} initialize a initialize\r\n\t */\r\n\tremoveInitialize(initializer) {\r\n\t\tconst index = this.initializes.indexOf(initializer);\r\n\t\tif (index > -1) this.initializes.splice(index, 1);\r\n\t}\r\n\r\n\t/**\r\n\t * remove all Initializes\r\n\t * @method removeInitializers\r\n\t */\r\n\tremoveAllInitializers() {\r\n\t\tUtil.destroyArray(this.initializes);\r\n\t}\r\n\r\n\t/**\r\n\t * add the Behaviour to particles;\r\n\t * \r\n\t * you can use Behaviours array:emitter.addBehaviour(Behaviour1,Behaviour2,Behaviour3);\r\n\t * @method addBehaviour\r\n\t * @param {Behaviour} behaviour like this new Color('random')\r\n\t */\r\n\taddBehaviour(...rest) {\r\n\t\tlet i = arguments.length;\r\n\t\twhile (i--) {\r\n\t\t\tlet behaviour = rest[i];\r\n\t\t\tthis.behaviours.push(behaviour);\r\n\t\t\tif (behaviour.parents) behaviour.parents.push(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * remove the Behaviour\r\n\t * @method removeBehaviour\r\n\t * @param {Behaviour} behaviour a behaviour\r\n\t */\r\n\tremoveBehaviour(behaviour) {\r\n\t\tlet index = this.behaviours.indexOf(behaviour);\r\n\t\tthis.behaviours.splice(index, 1);\r\n\r\n\t\tif (behaviour.parents) {\r\n\t\t\tindex = behaviour.parents.indexOf(behaviour);\r\n\t\t\tbehaviour.parents.splice(index, 1);\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\t}\r\n\r\n\t/**\r\n\t * remove all behaviours\r\n\t * @method removeAllBehaviours\r\n\t */\r\n\tremoveAllBehaviours() {\r\n\t\tUtil.destroyArray(this.behaviours);\r\n\t}\r\n\r\n\t// emitter update \r\n\tupdate(time) {\r\n\t\tthis.age += time;\r\n\t\tif (this.age >= this.life || this.dead) this.destroy();\r\n\r\n\t\tthis.emitting(time);\r\n\t\tthis.integrate(time);\r\n\t}\r\n\r\n\tintegrate(time) {\r\n\t\tif (!this.parent) return;\r\n\r\n\t\tconst damping = 1 - this.damping;\r\n\t\tthis.parent.integrator.calculate(this, time, damping);\r\n\r\n\t\tconst length = this.particles.length;\r\n\t\tlet i, particle;\r\n\r\n\t\tfor (i = length - 1; i >= 0; i--) {\r\n\t\t\tparticle = this.particles[i];\r\n\r\n\t\t\t// particle update\r\n\t\t\tparticle.update(time, i);\r\n\t\t\tthis.parent.integrator.calculate(particle, time, damping);\r\n\t\t\tthis.dispatch(\"PARTICLE_UPDATE\", particle);\r\n\r\n\t\t\t// check dead\r\n\t\t\tif (particle.dead) {\r\n\t\t\t\tthis.dispatch(\"PARTICLE_DEAD\", particle);\r\n\r\n\t\t\t\tthis.parent.pool.expire(particle);\r\n\t\t\t\tthis.particles.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdispatch(event, target) {\r\n\t\tthis.parent && this.parent.dispatchEvent(event, target);\r\n\t\tthis.bindEvent && this.dispatchEvent(event, target);\r\n\t}\r\n\r\n\temitting(time) {\r\n\t\tif (this.totalTime == 'once') {\r\n\t\t\tlet i;\r\n\t\t\tconst length = this.rate.getValue(99999);\r\n\r\n\t\t\tif (length > 0) this.emitSpeed = length;\r\n\t\t\tfor (i = 0; i < length; i++) this.createParticle();\r\n\t\t\tthis.totalTime = 'none';\r\n\t\t}\r\n\r\n\t\telse {\r\n\t\t\tthis.emitTime += time;\r\n\r\n\t\t\tif (this.emitTime < this.totalTime) {\r\n\t\t\t\tconst length = this.rate.getValue(time)\r\n\t\t\t\tlet i;\r\n\r\n\t\t\t\tif (length > 0) this.emitSpeed = length;\r\n\t\t\t\tfor (i = 0; i < length; i++) this.createParticle();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * create single particle;\r\n\t * \r\n\t * can use emit({x:10},new Gravity(10),{'particleUpdate',fun}) or emit([{x:10},new Initialize],new Gravity(10),{'particleUpdate',fun})\r\n\t * @method removeAllParticles\r\n\t */\r\n\tcreateParticle(initialize, behaviour) {\r\n\t\tconst particle = this.parent.pool.get(Particle);\r\n\t\tthis.setupParticle(particle, initialize, behaviour);\r\n\t\tthis.dispatch(\"PARTICLE_CREATED\", particle);\r\n\r\n\t\treturn particle;\r\n\t}\r\n\r\n\tsetupParticle(particle, initialize, behaviour) {\r\n\t\tlet initializes = this.initializes;\r\n\t\tlet behaviours = this.behaviours;\r\n\r\n\t\tif (initialize) {\r\n\t\t\tinitializes = Util.isArray(initialize) ? initialize : [initialize];\r\n\t\t}\r\n\r\n\t\tif (behaviour) {\r\n\t\t\tbehaviour = Util.isArray(behaviour) ? behaviour : [behaviour];\r\n\t\t}\r\n\r\n\t\tparticle.reset();\r\n\t\tInitializeUtil.initialize(this, particle, initializes);\r\n\t\tparticle.addBehaviours(behaviours);\r\n\t\tparticle.parent = this;\r\n\r\n\t\tthis.particles.push(particle);\r\n\t}\r\n\r\n\tremove() {\r\n\t\tthis.stop();\r\n\t\tUtil.destroy(this.particles);\r\n\t}\r\n\r\n\t/**\r\n\t * Destory this Emitter\r\n\t * @method destroy\r\n\t */\r\n\tdestroy(slow) {\r\n\t\tthis.dead = true;\r\n\t\tthis.remove();\r\n\t\tthis.removeAllInitializers();\r\n\t\tthis.removeAllBehaviours();\r\n\t\tthis.parent && this.parent.removeEmitter(this);\r\n\t}\r\n\r\n}\r\n\r\nEventDispatcher.bind(Emitter);","import Util from '../utils/Util';\r\nimport Emitter from './Emitter';\r\n\r\nexport default class BehaviourEmitter extends Emitter {\r\n\r\n\t/**\r\n\t * The BehaviourEmitter class inherits from Proton.Emitter\r\n\t *\r\n\t * use the BehaviourEmitter you can add behaviours to self;\r\n\t * @class Proton.BehaviourEmitter\r\n\t * @constructor\r\n\t * @param {Object} pObj the parameters object;\r\n\t */\r\n\tconstructor(pObj) {\r\n\t\tsuper(pObj);\r\n\r\n\t\tthis.selfBehaviours = [];\r\n\t};\r\n\t\r\n\t/**\r\n\t * add the Behaviour to emitter;\r\n\t *\r\n\t * you can use Behaviours array:emitter.addSelfBehaviour(Behaviour1,Behaviour2,Behaviour3);\r\n\t * @method addSelfBehaviour\r\n\t * @param {Proton.Behaviour} behaviour like this new Proton.Color('random')\r\n\t */\r\n\taddSelfBehaviour(...rest) {\r\n\t\tconst length = rest.length;\r\n\t\tlet i;\r\n\r\n\t\tfor (i = 0; i < length; i++) {\r\n\t\t\tthis.selfBehaviours.push(rest[i]);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * remove the Behaviour for self\r\n\t * @method removeSelfBehaviour\r\n\t * @param {Proton.Behaviour} behaviour a behaviour\r\n\t */\r\n\tremoveSelfBehaviour(behaviour) {\r\n\t\tconst index = this.selfBehaviours.indexOf(behaviour);\r\n\t\tif (index > -1) this.selfBehaviours.splice(index, 1);\r\n\t};\r\n\r\n\tupdate(time) {\r\n\t\tsuper.update(time);\r\n\r\n\t\tif (!this.sleep) {\r\n\t\t\tconst length = this.selfBehaviours.length;\r\n\t\t\tlet i;\r\n\r\n\t\t\tfor (i = 0; i < length; i++) {\r\n\t\t\t\tthis.selfBehaviours[i].applyBehaviour(this, time, i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import Util from '../utils/Util';\r\nimport Emitter from './Emitter';\r\n\r\nexport default class FollowEmitter extends Emitter {\r\n\r\n\t/**\r\n\t * The FollowEmitter class inherits from Proton.Emitter\r\n\t *\r\n\t * use the FollowEmitter will emit particle when mousemoving\r\n\t *\r\n\t * @class Proton.FollowEmitter\r\n\t * @constructor\r\n\t * @param {Element} mouseTarget mouseevent's target;\r\n\t * @param {Number} ease the easing of following speed;\r\n\t * @default 0.7\r\n\t * @param {Object} pObj the parameters object;\r\n\t */\r\n\tconstructor(mouseTarget, ease, pObj) {\r\n\t\tsuper(pObj);\r\n\r\n\t\tthis.mouseTarget = Util.initValue(mouseTarget, window);\r\n\t\tthis.ease = Util.initValue(ease, .7);\r\n\r\n\t\tthis._allowEmitting = false;\r\n\t\tthis.initEventHandler();\r\n\t};\r\n\r\n\tinitEventHandler() {\r\n\t\tthis.mousemoveHandler = e => this.mousemove.call(this, e);\r\n\t\tthis.mousedownHandler = e => this.mousedown.call(this, e);\r\n\t\tthis.mouseupHandler = e => this.mouseup.call(this, e);\r\n\r\n\t\tthis.mouseTarget.addEventListener('mousemove', this.mousemoveHandler, false);\r\n\t}\r\n\r\n\t/**\r\n\t * start emit particle\r\n\t * @method emit\r\n\t */\r\n\temit() {\r\n\t\tthis._allowEmitting = true;\r\n\t}\r\n\r\n\t/**\r\n\t * stop emiting\r\n\t * @method stop\r\n\t */\r\n\tstop() {\r\n\t\tthis._allowEmitting = false;\r\n\t}\r\n\r\n\tmousemove(e) {\r\n\t\tif (e.layerX || e.layerX === 0) {\r\n\t\t\tthis.p.x += (e.layerX - this.p.x) * this.ease;\r\n\t\t\tthis.p.y += (e.layerY - this.p.y) * this.ease;\r\n\t\t} else if (e.offsetX || e.offsetX === 0) {\r\n\t\t\tthis.p.x += (e.offsetX - this.p.x) * this.ease;\r\n\t\t\tthis.p.y += (e.offsetY - this.p.y) * this.ease;\r\n\t\t}\r\n\r\n\t\tif (this._allowEmitting) super.emit('once');\r\n\t};\r\n\r\n\t/**\r\n\t * Destory this Emitter\r\n\t * @method destroy\r\n\t */\r\n\tdestroy() {\r\n\t\tsuper.destroy();\r\n\t\tthis.mouseTarget.removeEventListener('mousemove', this.mousemoveHandler, false);\r\n\t}\r\n\r\n}\r\n","import Pool from '../core/Pool';\r\nimport Util from '../utils/Util';\r\n\r\nexport default class BaseRenderer {\r\n\r\n    constructor(element, stroke) {\r\n        this.element = element;\r\n        this.stroke = stroke;\r\n\r\n        this.initHandler();\r\n\r\n        this.circleConf = { isCircle: true };\r\n        this.pool = new Pool();\r\n        this.name = 'BaseRenderer';\r\n    }\r\n\r\n    setStroke(color, thinkness) {\r\n        color = Util.initValue(color, '#000000');\r\n        thinkness = Util.initValue(thinkness, 1);\r\n\r\n        this.stroke = { color, thinkness };\r\n    }\r\n\r\n    initHandler() {\r\n        this._protonUpdateHandler = () => { this.onProtonUpdate.call(this) };\r\n        this._protonUpdateAfterHandler = () => { this.onProtonUpdateAfter.call(this) };\r\n        this._emitterAddedHandler = (emitter) => { this.onEmitterAdded.call(this, emitter) };\r\n        this._emitterRemovedHandler = (emitter) => { this.onEmitterRemoved.call(this, emitter) };\r\n        this._particleCreatedHandler = (particle) => { this.onParticleCreated.call(this, particle) };\r\n        this._particleUpdateHandler = (particle) => { this.onParticleUpdate.call(this, particle) };\r\n        this._particleDeadHandler = (particle) => { this.onParticleDead.call(this, particle) };\r\n    }\r\n\r\n    init(proton) {\r\n        this.parent = proton;\r\n\r\n        proton.addEventListener('PROTON_UPDATE', this._protonUpdateHandler);\r\n        proton.addEventListener('PROTON_UPDATE_AFTER', this._protonUpdateAfterHandler);\r\n\r\n        proton.addEventListener('EMITTER_ADDED', this._emitterAddedHandler);\r\n        proton.addEventListener('EMITTER_REMOVED', this._emitterRemovedHandler);\r\n\r\n        proton.addEventListener('PARTICLE_CREATED', this._particleCreatedHandler);\r\n        proton.addEventListener('PARTICLE_UPDATE', this._particleUpdateHandler);\r\n        proton.addEventListener('PARTICLE_DEAD', this._particleDeadHandler);\r\n    }\r\n\r\n    resize(width, height) {}\r\n\r\n    remove(proton) {\r\n        this.parent.removeEventListener('PROTON_UPDATE', this._protonUpdateHandler);\r\n        this.parent.removeEventListener('PROTON_UPDATE_AFTER', this._protonUpdateAfterHandler);\r\n\r\n        this.parent.removeEventListener('EMITTER_ADDED', this._emitterAddedHandler);\r\n        this.parent.removeEventListener('EMITTER_REMOVED', this._emitterRemovedHandler);\r\n\r\n        this.parent.removeEventListener('PARTICLE_CREATED', this._particleCreatedHandler);\r\n        this.parent.removeEventListener('PARTICLE_UPDATE', this._particleUpdateHandler);\r\n        this.parent.removeEventListener('PARTICLE_DEAD', this._particleDeadHandler);\r\n\r\n        this.parent = null;\r\n    }\r\n\r\n    destroy(){\r\n        this.remove();\r\n    }\r\n    \r\n    onProtonUpdate() {}\r\n    onProtonUpdateAfter() {}\r\n\r\n    onEmitterAdded(emitter) {}\r\n    onEmitterRemoved(emitter) {}\r\n\r\n    onParticleCreated(particle) {}\r\n    onParticleUpdate(particle) {}\r\n    onParticleDead(particle) {}\r\n}","import Util from '../utils/Util';\r\nimport ImgUtil from '../utils/ImgUtil';\r\nimport ColorUtil from '../utils/ColorUtil';\r\nimport MathUtils from '../math/MathUtils';\r\nimport BaseRenderer from './BaseRenderer';\r\n\r\nexport default class CanvasRenderer extends BaseRenderer {\r\n\r\n    constructor(element) {\r\n        super(element);\r\n\r\n        this.stroke = null;\r\n        this.context = this.element.getContext(\"2d\");\r\n        this.bufferCache = {};\r\n\r\n        this.name = 'CanvasRenderer';\r\n    }\r\n\r\n    resize(width, height) {\r\n        this.element.width = width;\r\n        this.element.height = height;\r\n    }\r\n\r\n    onProtonUpdate() {\r\n        this.context.clearRect(0, 0, this.element.width, this.element.height);\r\n    }\r\n\r\n    onParticleCreated(particle) {\r\n        if (particle.body)\r\n            ImgUtil.getImgFromCache(particle.body, this.addImg2Body, particle);\r\n        else\r\n            particle.color = particle.color || '#ff0000';\r\n    }\r\n\r\n    onParticleUpdate(particle) {\r\n        if (particle.body) {\r\n            if (particle.body instanceof Image) this.drawImage(particle);\r\n        } else {\r\n            this.drawCircle(particle);\r\n        }\r\n    }\r\n\r\n    onParticleDead(particle) {\r\n        particle.body = null;\r\n    }\r\n\r\n\r\n    // private \r\n    addImg2Body(img, particle) {\r\n        particle.body = img;\r\n    }\r\n\r\n    // private drawCircle --\r\n    drawImage(particle) {\r\n        const w = particle.body.width * particle.scale | 0;\r\n        const h = particle.body.height * particle.scale | 0;\r\n        const x = particle.p.x - w / 2;\r\n        const y = particle.p.y - h / 2;\r\n\r\n        if (!!particle.color) {\r\n            if (!particle.transform[\"buffer\"]) particle.transform.buffer = this.createBuffer(particle.body);\r\n\r\n            const bufferContext = particle.transform.buffer.getContext('2d');\r\n            bufferContext.clearRect(0, 0, particle.transform.buffer.width, particle.transform.buffer.height);\r\n            bufferContext.globalAlpha = particle.alpha;\r\n            bufferContext.drawImage(particle.body, 0, 0);\r\n\r\n            bufferContext.globalCompositeOperation = \"source-atop\";\r\n            bufferContext.fillStyle = ColorUtil.rgbToHex(particle.transform.rgb);\r\n            bufferContext.fillRect(0, 0, particle.transform.buffer.width, particle.transform.buffer.height);\r\n            bufferContext.globalCompositeOperation = \"source-over\";\r\n            bufferContext.globalAlpha = 1;\r\n\r\n            this.context.drawImage(particle.transform.buffer, 0, 0, particle.transform.buffer.width, particle.transform.buffer.height, x, y, w, h);\r\n        } else {\r\n            this.context.save();\r\n\r\n            this.context.globalAlpha = particle.alpha;\r\n            this.context.translate(particle.p.x, particle.p.y);\r\n            this.context.rotate(MathUtils.degreeTransform(particle.rotation));\r\n            this.context.translate(-particle.p.x, -particle.p.y);\r\n            this.context.drawImage(particle.body, 0, 0, particle.body.width, particle.body.height, x, y, w, h);\r\n\r\n            this.context.globalAlpha = 1;\r\n            this.context.restore();\r\n        }\r\n    }\r\n\r\n    // private drawCircle --\r\n    drawCircle(particle) {\r\n        if (particle.transform[\"rgb\"])\r\n            this.context.fillStyle = 'rgba(' + particle.transform.rgb.r + ',' + particle.transform.rgb.g + ',' + particle.transform.rgb.b + ',' + particle.alpha + ')';\r\n        else\r\n            this.context.fillStyle = particle.color;\r\n\r\n        // draw circle\r\n        this.context.beginPath();\r\n        this.context.arc(particle.p.x, particle.p.y, particle.radius, 0, Math.PI * 2, true);\r\n\r\n        if (this.stroke) {\r\n            this.context.strokeStyle = this.stroke.color;\r\n            this.context.lineWidth = this.stroke.thinkness;\r\n            this.context.stroke();\r\n        }\r\n\r\n        this.context.closePath();\r\n        this.context.fill();\r\n    }\r\n\r\n    // private createBuffer --\r\n    createBuffer(image) {\r\n        if (image instanceof Image) {\r\n            const size = image.width + '_' + image.height;\r\n            let canvas = this.bufferCache[size];\r\n\r\n            if (!canvas) {\r\n                canvas = document.createElement('canvas');\r\n                canvas.width = image.width;\r\n                canvas.height = image.height;\r\n                this.bufferCache[size] = canvas;\r\n            }\r\n\r\n            return canvas;\r\n        }\r\n    }\r\n}","import Util from '../utils/Util';\r\nimport DomUtil from '../utils/DomUtil';\r\nimport ImgUtil from '../utils/ImgUtil';\r\nimport MathUtils from '../math/MathUtils';\r\nimport BaseRenderer from './BaseRenderer';\r\n\r\nexport default class DomRenderer extends BaseRenderer {\r\n\r\n    constructor(element) {\r\n        super(element);\r\n\r\n        this.stroke = null;\r\n        this.pool.create = (body, particle) => this.createBody(body, particle);\r\n        this.addImg2Body = this.addImg2Body.bind(this);\r\n\r\n        this.transform3d = false;\r\n\r\n        this.name = 'DomRenderer';\r\n    }\r\n\r\n    onParticleCreated(particle) {\r\n        if (particle.body) {\r\n            ImgUtil.getImgFromCache(particle.body, this.addImg2Body, particle);\r\n        } else {\r\n            particle.body = this.pool.get(this.circleConf, particle);\r\n            this.element.appendChild(particle.body);\r\n        }\r\n    }\r\n\r\n    onParticleUpdate(particle) {\r\n        if (this.bodyReady(particle)) {\r\n            if (this.transform3d)\r\n                DomUtil.transform3d(particle.body, particle.p.x, particle.p.y, particle.scale, particle.rotation);\r\n            else\r\n                DomUtil.transform(particle.body, particle.p.x, particle.p.y, particle.scale, particle.rotation);\r\n\r\n            particle.body.style.opacity = particle.alpha;\r\n            if (particle.body.isCircle) {\r\n                particle.body.style.backgroundColor = particle.color || '#ff0000';\r\n            }\r\n        }\r\n    }\r\n\r\n    onParticleDead(particle) {\r\n        if (this.bodyReady(particle)) {\r\n            this.element.removeChild(particle.body);\r\n            this.pool.expire(particle.body);\r\n            particle.body = null;\r\n        }\r\n    }\r\n\r\n    bodyReady(particle) {\r\n        return typeof particle.body === 'object' && particle.body && !particle.body.isInner;\r\n    }\r\n\r\n    // private \r\n    addImg2Body(img, particle) {\r\n        if (particle.dead) return;\r\n        particle.body = this.pool.get(img, particle);\r\n        DomUtil.resize(particle.body, img.width, img.height);\r\n\r\n        this.element.appendChild(particle.body);\r\n    }\r\n\r\n    createBody(body, particle) {\r\n        if (body.isCircle)\r\n            return this.createCircle(particle);\r\n        else\r\n            return this.createSprite(body, particle);\r\n    }\r\n\r\n    // private --\r\n    createCircle(particle) {\r\n        const dom = DomUtil.createDiv(`${particle.id}_dom`, 2 * particle.radius, 2 * particle.radius);\r\n        dom.style.borderRadius = `${particle.radius}px`;\r\n\r\n        if (this.stroke) {\r\n            dom.style.borderColor = this.stroke.color;\r\n            dom.style.borderWidth = `${this.stroke.thinkness}px`;\r\n        }\r\n        dom.isCircle = true;\r\n\r\n        return dom;\r\n    }\r\n\r\n    createSprite(body, particle) {\r\n        const url = typeof body === 'string' ? body : body.src;\r\n        const dom = DomUtil.createDiv(`${particle.id}_dom`, body.width, body.height);\r\n        dom.style.backgroundImage = `url(${url})`;\r\n\r\n        return dom;\r\n    }\r\n\r\n}","import Util from '../utils/Util';\r\nimport BaseRenderer from './BaseRenderer';\r\n\r\nexport default class EaselRenderer extends BaseRenderer {\r\n\r\n    constructor(element, stroke) {\r\n        super(element);\r\n\r\n        this.stroke = stroke;\r\n        this.name = 'EaselRenderer';\r\n    }\r\n\r\n    onParticleCreated(particle) {\r\n        if (particle.body) {\r\n            this.createSprite(particle);\r\n        } else {\r\n            this.createCircle(particle);\r\n        }\r\n\r\n        this.element.addChild(particle.body);\r\n    }\r\n\r\n    onParticleUpdate(particle) {\r\n        if (particle.body) {\r\n            particle.body.x = particle.p.x;\r\n            particle.body.y = particle.p.y;\r\n\r\n            particle.body.alpha = particle.alpha;\r\n            particle.body.scaleX = particle.body.scaleY = particle.scale;\r\n            particle.body.rotation = particle.rotation;\r\n        }\r\n    }\r\n\r\n    onParticleDead(particle) {\r\n        if (particle.body) {\r\n            particle.body.parent && particle.body.parent.removeChild(particle.body);\r\n            this.pool.expire(particle.body);\r\n            particle.body = null;\r\n        }\r\n\r\n        if (particle.graphics) this.pool.expire(particle.graphics);\r\n    }\r\n\r\n    // private\r\n    createSprite(particle) {\r\n        particle.body = this.pool.get(particle.body);\r\n\r\n        if (particle.body.parent) return;\r\n        if (particle.body['image']) {\r\n            particle.body.regX = particle.body.image.width / 2;\r\n            particle.body.regY = particle.body.image.height / 2;\r\n        }\r\n    }\r\n\r\n    createCircle(particle) {\r\n        const graphics = this.pool.get(createjs.Graphics);\r\n\r\n        if (this.stroke) {\r\n            if (this.stroke instanceof String)\r\n                graphics.beginStroke(this.stroke);\r\n            else\r\n                graphics.beginStroke('#000000');\r\n        }\r\n        graphics.beginFill(particle.color || '#ff0000').drawCircle(0, 0, particle.radius);\r\n\r\n        const shape = this.pool.get(createjs.Shape, [graphics]);\r\n\r\n        particle.body = shape;\r\n        particle.graphics = graphics;\r\n    }\r\n\r\n}","import Util from '../utils/Util';\r\nimport Rectangle from '../math/Rectangle';\r\nimport BaseRenderer from './BaseRenderer';\r\n\r\nexport default class PixelRenderer extends BaseRenderer {\r\n\r\n    constructor(element, rectangle) {\r\n        super(element);\r\n\r\n        this.context = this.element.getContext('2d');\r\n        this.imageData = null;\r\n        this.rectangle = null;\r\n        this.rectangle = rectangle;\r\n        this.createImageData(rectangle);\r\n\r\n        this.name = 'PixelRenderer';\r\n    }\r\n\r\n    resize(width, height) {\r\n        this.element.width = width;\r\n        this.element.height = height;\r\n    }\r\n\r\n    createImageData(rectangle) {\r\n        this.rectangle = rectangle ? rectangle : new Rectangle(0, 0, this.element.width, this.element.height);\r\n        this.imageData = this.context.createImageData(this.rectangle.width, this.rectangle.height);\r\n        this.context.putImageData(this.imageData, this.rectangle.x, this.rectangle.y);\r\n    }\r\n\r\n    onProtonUpdate() {\r\n        this.context.clearRect(this.rectangle.x, this.rectangle.y, this.rectangle.width, this.rectangle.height);\r\n        this.imageData = this.context.getImageData(this.rectangle.x, this.rectangle.y, this.rectangle.width, this.rectangle.height);\r\n    }\r\n\r\n    onProtonUpdateAfter() {\r\n        this.context.putImageData(this.imageData, this.rectangle.x, this.rectangle.y);\r\n    }\r\n\r\n    onParticleCreated(particle) {}\r\n\r\n    onParticleUpdate(particle) {\r\n        if (this.imageData) {\r\n            this.setPixel(this.imageData, Math.floor(particle.p.x - this.rectangle.x), Math.floor(particle.p.y - this.rectangle.y), particle);\r\n        }\r\n    }\r\n\r\n    setPixel(imagedata, x, y, particle) {\r\n        const rgb = particle.transform.rgb;\r\n\r\n        if ((x < 0) || (x > this.element.width) || (y < 0) || (y > this.elementwidth))\r\n            return;\r\n\r\n        const i = ((y >> 0) * imagedata.width + (x >> 0)) * 4;\r\n\r\n        imagedata.data[i] = rgb.r;\r\n        imagedata.data[i + 1] = rgb.g;\r\n        imagedata.data[i + 2] = rgb.b;\r\n        imagedata.data[i + 3] = particle.alpha * 255;\r\n    }\r\n\r\n    onParticleDead(particle) {\r\n\r\n    }\r\n\r\n}","import Pool from '../core/Pool';\r\nimport Util from '../utils/Util';\r\nimport ColorUtil from '../utils/ColorUtil';\r\nimport MathUtils from '../math/MathUtils';\r\nimport BaseRenderer from './BaseRenderer';\r\n\r\nexport default class PixiRenderer extends BaseRenderer {\r\n\r\n    constructor(element, stroke) {\r\n        super(element);\r\n\r\n        this.stroke = stroke;\r\n        this.setColor = false;\r\n        this.pool.create = (body, particle) => this.createBody(body, particle);\r\n        this.name = 'PixiRenderer';\r\n    }\r\n\r\n    onProtonUpdate() { }\r\n\r\n    /**\r\n     * @param particle\r\n     */\r\n    onParticleCreated(particle) {\r\n        if (particle.body) {\r\n            particle.body = this.pool.get(particle.body, particle);\r\n        } else {\r\n            particle.body = this.pool.get(this.circleConf, particle);\r\n        }\r\n\r\n        this.element.addChild(particle.body);\r\n    }\r\n\r\n    /**\r\n     * @param particle\r\n     */\r\n    onParticleUpdate(particle) {\r\n        this.transform(particle, particle.body);\r\n        if (this.setColor) particle.body.tint = ColorUtil.getHex16FromParticle(particle);\r\n    }\r\n\r\n    /**\r\n     * @param particle\r\n     */\r\n    onParticleDead(particle) {\r\n        this.element.removeChild(particle.body);\r\n        this.pool.expire(particle.body);\r\n        particle.body = null;\r\n    }\r\n\r\n    destroy(particles) {\r\n        super.destroy();\r\n        this.pool.destroy();\r\n\r\n        let i = particles.length;\r\n        while (i--) {\r\n            let particle = particles[i];\r\n            if (particle.body) {\r\n                this.element.removeChild(particle.body);\r\n            }\r\n        }\r\n    }\r\n\r\n    transform(particle, target) {\r\n        target.x = particle.p.x;\r\n        target.y = particle.p.y;\r\n\r\n        target.alpha = particle.alpha;\r\n\r\n        target.scale.x = particle.scale;\r\n        target.scale.y = particle.scale;\r\n\r\n        // using cached version of MathUtils.PI_180 for slight performance increase.\r\n        target.rotation = particle.rotation * MathUtils.PI_180; // MathUtils.PI_180;\r\n    }\r\n\r\n    createBody(body, particle) {\r\n        if (body.isCircle)\r\n            return this.createCircle(particle);\r\n        else\r\n            return this.createSprite(body);\r\n    }\r\n\r\n    createSprite(body) {\r\n        const sprite = body.isInner ? PIXI.Sprite.fromImage(body.src) : new PIXI.Sprite(body);\r\n        sprite.anchor.x = 0.5;\r\n        sprite.anchor.y = 0.5;\r\n\r\n        return sprite;\r\n    }\r\n\r\n    createCircle(particle) {\r\n        const graphics = new PIXI.Graphics();\r\n\r\n        if (this.stroke) {\r\n            let stroke = this.stroke instanceof String ? this.stroke : 0x000000;\r\n            graphics.beginStroke(this.stroke);\r\n        }\r\n\r\n        graphics.beginFill(particle.color || 0x008ced);\r\n        graphics.drawCircle(0, 0, particle.radius);\r\n        graphics.endFill();\r\n\r\n        return graphics;\r\n    }\r\n}","import Mat3 from '../math/Mat3';\r\n\r\nexport default class MStack {\r\n\r\n\tconstructor() {\r\n\t\tthis.mats = [];\r\n\t\tthis.size = 0;\r\n\r\n\t\tfor (let i = 0; i < 20; i++) this.mats.push(Mat3.create([0, 0, 0, 0, 0, 0, 0, 0, 0]));\r\n\t}\r\n\r\n\tset(m, i) {\r\n\t\tif (i == 0)\r\n\t\t\tMat3.set(m, this.mats[0]);\r\n\t\telse\r\n\t\t\tMat3.multiply(this.mats[i - 1], m, this.mats[i]);\r\n\r\n\t\tthis.size = Math.max(this.size, i + 1);\r\n\t}\r\n\r\n\tpush(m) {\r\n\t\tif (this.size == 0)\r\n\t\t\tMat3.set(m, this.mats[0]);\r\n\t\telse\r\n\t\t\tMat3.multiply(this.mats[this.size - 1], m, this.mats[this.size]);\r\n\r\n\t\tthis.size++;\r\n\t}\r\n\r\n\tpop() {\r\n\t\tif (this.size > 0)\r\n\t\t\tthis.size--;\r\n\t}\r\n\r\n\ttop() {\r\n\t\treturn (this.mats[this.size - 1]);\r\n\t}\r\n}","import Mat3 from '../math/Mat3';\r\nimport BaseRenderer from './BaseRenderer';\r\n\r\nimport Util from '../utils/Util';\r\nimport ImgUtil from '../utils/ImgUtil';\r\nimport MStack from '../utils/MStack';\r\nimport DomUtil from '../utils/DomUtil';\r\nimport WebGLUtil from '../utils/WebGLUtil';\r\nimport MathUtils from '../math/MathUtils';\r\n\r\nexport default class WebGLRenderer extends BaseRenderer {\r\n\r\n    constructor(element) {\r\n        super(element);\r\n\r\n        this.gl = this.element.getContext('experimental-webgl', { antialias: true, stencil: false, depth: false });\r\n        if (!this.gl) alert(\"Sorry your browser do not suppest WebGL!\");\r\n\r\n        this.initVar();\r\n        this.setMaxRadius();\r\n        this.initShaders();\r\n        this.initBuffers();\r\n\r\n        this.gl.blendEquation(this.gl.FUNC_ADD);\r\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n        this.gl.enable(this.gl.BLEND);\r\n\r\n        this.addImg2Body = this.addImg2Body.bind(this);\r\n\r\n        this.name = 'WebGLRenderer';\r\n    }\r\n\r\n    init(proton) {\r\n        super.init(proton);\r\n        this.resize(this.element.width, this.element.height);\r\n    }\r\n\r\n    resize(width, height) {\r\n        this.umat[4] = -2;\r\n        this.umat[7] = 1;\r\n\r\n        this.smat[0] = 1 / width;\r\n        this.smat[4] = 1 / height;\r\n\r\n        this.mstack.set(this.umat, 0);\r\n        this.mstack.set(this.smat, 1);\r\n\r\n        this.gl.viewport(0, 0, width, height);\r\n        this.element.width = width;\r\n        this.element.height = height;\r\n    }\r\n\r\n    setMaxRadius(radius) {\r\n        this.circleCanvasURL = this.createCircle(radius);\r\n    }\r\n\r\n    getVertexShader() {\r\n        const vsSource = [\"uniform vec2 viewport;\", \"attribute vec2 aVertexPosition;\", \"attribute vec2 aTextureCoord;\", \"uniform mat3 tMat;\", \"varying vec2 vTextureCoord;\", \"varying float alpha;\", \"void main() {\", \"vec3 v = tMat * vec3(aVertexPosition, 1.0);\", \"gl_Position = vec4(v.x, v.y, 0, 1);\", \"vTextureCoord = aTextureCoord;\", \"alpha = tMat[0][2];\", \"}\"].join(\"\\n\");\r\n        return vsSource;\r\n    }\r\n\r\n    getFragmentShader() {\r\n        const fsSource = [\"precision mediump float;\", \"varying vec2 vTextureCoord;\", \"varying float alpha;\", \"uniform sampler2D uSampler;\", \"uniform vec4 color;\", \"uniform bool useTexture;\", \"uniform vec3 uColor;\", \"void main() {\", \"vec4 textureColor = texture2D(uSampler, vTextureCoord);\", \"gl_FragColor = textureColor * vec4(uColor, 1.0);\", \"gl_FragColor.w *= alpha;\", \"}\"].join(\"\\n\");\r\n        return fsSource;\r\n    }\r\n\r\n    initVar() {\r\n        this.mstack = new MStack();\r\n        this.umat = Mat3.create([2, 0, 1, 0, -2, 0, -1, 1, 1]);\r\n        this.smat = Mat3.create([1 / 100, 0, 1, 0, 1 / 100, 0, 0, 0, 1]);\r\n        this.texturebuffers = {};\r\n    }\r\n\r\n    blendEquation(A) {\r\n        this.gl.blendEquation(this.gl[A]);\r\n    }\r\n\r\n    blendFunc(A, B) {\r\n        this.gl.blendFunc(this.gl[A], this.gl[B]);\r\n    }\r\n\r\n    getShader(gl, str, fs) {\r\n        const shader = fs ? gl.createShader(gl.FRAGMENT_SHADER) : gl.createShader(gl.VERTEX_SHADER);\r\n\r\n        gl.shaderSource(shader, str);\r\n        gl.compileShader(shader);\r\n\r\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n            alert(gl.getShaderInfoLog(shader));\r\n            return null;\r\n        }\r\n\r\n        return shader;\r\n    }\r\n\r\n    initShaders() {\r\n        const fragmentShader = this.getShader(this.gl, this.getFragmentShader(), true);\r\n        const vertexShader = this.getShader(this.gl, this.getVertexShader(), false);\r\n\r\n        this.sprogram = this.gl.createProgram();\r\n        this.gl.attachShader(this.sprogram, vertexShader);\r\n        this.gl.attachShader(this.sprogram, fragmentShader);\r\n        this.gl.linkProgram(this.sprogram);\r\n\r\n        if (!this.gl.getProgramParameter(this.sprogram, this.gl.LINK_STATUS))\r\n            alert(\"Could not initialise shaders\");\r\n\r\n        this.gl.useProgram(this.sprogram);\r\n        this.sprogram.vpa = this.gl.getAttribLocation(this.sprogram, \"aVertexPosition\");\r\n        this.sprogram.tca = this.gl.getAttribLocation(this.sprogram, \"aTextureCoord\");\r\n        this.gl.enableVertexAttribArray(this.sprogram.tca);\r\n        this.gl.enableVertexAttribArray(this.sprogram.vpa);\r\n\r\n        this.sprogram.tMatUniform = this.gl.getUniformLocation(this.sprogram, \"tMat\");\r\n        this.sprogram.samplerUniform = this.gl.getUniformLocation(this.sprogram, \"uSampler\");\r\n        this.sprogram.useTex = this.gl.getUniformLocation(this.sprogram, \"useTexture\");\r\n        this.sprogram.color = this.gl.getUniformLocation(this.sprogram, \"uColor\");\r\n        this.gl.uniform1i(this.sprogram.useTex, 1);\r\n    };\r\n\r\n    initBuffers() {\r\n        const vs = [0, 3, 1, 0, 2, 3];\r\n        let idx;\r\n\r\n        this.unitIBuffer = this.gl.createBuffer();\r\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.unitIBuffer);\r\n        this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(vs), this.gl.STATIC_DRAW);\r\n\r\n        let i;\r\n        let ids = [];\r\n        for (i = 0; i < 100; i++) ids.push(i);\r\n        idx = new Uint16Array(ids);\r\n\r\n        this.unitI33 = this.gl.createBuffer();\r\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.unitI33);\r\n        this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, idx, this.gl.STATIC_DRAW);\r\n\r\n        ids = [];\r\n        for (i = 0; i < 100; i++) ids.push(i, i + 1, i + 2);\r\n        idx = new Uint16Array(ids);\r\n\r\n        this.stripBuffer = this.gl.createBuffer();\r\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.stripBuffer);\r\n        this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, idx, this.gl.STATIC_DRAW);\r\n    };\r\n\r\n    createCircle(raidus) {\r\n        this.circleCanvasRadius = WebGLUtil.nhpot(Util.initValue(raidus, 32));\r\n        const canvas = DomUtil.createCanvas('circle_canvas', this.circleCanvasRadius * 2, this.circleCanvasRadius * 2);\r\n        const context = canvas.getContext('2d');\r\n\r\n        context.beginPath();\r\n        context.arc(this.circleCanvasRadius, this.circleCanvasRadius, this.circleCanvasRadius, 0, Math.PI * 2, true);\r\n        context.closePath();\r\n        context.fillStyle = '#FFF';\r\n        context.fill();\r\n\r\n        return canvas.toDataURL();\r\n    };\r\n\r\n    drawImg2Canvas(particle) {\r\n        const _w = particle.body.width;\r\n        const _h = particle.body.height;\r\n\r\n        const _width = WebGLUtil.nhpot(particle.body.width);\r\n        const _height = WebGLUtil.nhpot(particle.body.height);\r\n\r\n        const _scaleX = particle.body.width / _width;\r\n        const _scaleY = particle.body.height / _height;\r\n\r\n        if (!this.texturebuffers[particle.transform.src])\r\n            this.texturebuffers[particle.transform.src] = [this.gl.createTexture(), this.gl.createBuffer(), this.gl.createBuffer()];\r\n\r\n        particle.transform.texture = this.texturebuffers[particle.transform.src][0];\r\n        particle.transform.vcBuffer = this.texturebuffers[particle.transform.src][1];\r\n        particle.transform.tcBuffer = this.texturebuffers[particle.transform.src][2];\r\n\r\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.transform.tcBuffer);\r\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, _scaleX, 0.0, 0.0, _scaleY, _scaleY, _scaleY]), this.gl.STATIC_DRAW);\r\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.transform.vcBuffer);\r\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, _w, 0.0, 0.0, _h, _w, _h]), this.gl.STATIC_DRAW);\r\n\r\n        const context = particle.transform.canvas.getContext('2d');\r\n        const data = context.getImageData(0, 0, _width, _height);\r\n\r\n        this.gl.bindTexture(this.gl.TEXTURE_2D, particle.transform.texture);\r\n        this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, data);\r\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\r\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR_MIPMAP_NEAREST);\r\n        this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n\r\n        particle.transform.textureLoaded = true;\r\n        particle.transform.textureWidth = _w;\r\n        particle.transform.textureHeight = _h;\r\n    }\r\n\r\n    onProtonUpdate() {\r\n        //this.gl.clearColor(0, 0, 0, 1);\r\n        //this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\r\n    }\r\n\r\n    onParticleCreated(particle) {\r\n        particle.transform.textureLoaded = false;\r\n        particle.transform.tmat = Mat3.create();\r\n        particle.transform.tmat[8] = 1;\r\n        particle.transform.imat = Mat3.create();\r\n        particle.transform.imat[8] = 1;\r\n\r\n        if (particle.body) {\r\n            ImgUtil.getImgFromCache(particle.body, this.addImg2Body, particle);\r\n        } else {\r\n            ImgUtil.getImgFromCache(this.circleCanvasURL, this.addImg2Body, particle);\r\n            particle.transform.oldScale = particle.radius / this.circleCanvasRadius;\r\n        }\r\n    }\r\n\r\n    // private \r\n    addImg2Body(img, particle) {\r\n        if (particle.dead) return;\r\n        \r\n        particle.body = img;\r\n        particle.transform.src = img.src;\r\n        particle.transform.canvas = ImgUtil.getCanvasFromCache(img);\r\n        particle.transform.oldScale = 1;\r\n\r\n        this.drawImg2Canvas(particle);\r\n    }\r\n\r\n    onParticleUpdate(particle) {\r\n        if (particle.transform.textureLoaded) {\r\n            this.updateMatrix(particle);\r\n\r\n            this.gl.uniform3f(this.sprogram.color, particle.transform.rgb.r / 255, particle.transform.rgb.g / 255, particle.transform.rgb.b / 255);\r\n            this.gl.uniformMatrix3fv(this.sprogram.tMatUniform, false, this.mstack.top());\r\n\r\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.transform.vcBuffer);\r\n            this.gl.vertexAttribPointer(this.sprogram.vpa, 2, this.gl.FLOAT, false, 0, 0);\r\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.transform.tcBuffer);\r\n            this.gl.vertexAttribPointer(this.sprogram.tca, 2, this.gl.FLOAT, false, 0, 0);\r\n            this.gl.bindTexture(this.gl.TEXTURE_2D, particle.transform.texture);\r\n            this.gl.uniform1i(this.sprogram.samplerUniform, 0);\r\n            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.unitIBuffer);\r\n\r\n            this.gl.drawElements(this.gl.TRIANGLES, 6, this.gl.UNSIGNED_SHORT, 0);\r\n\r\n            this.mstack.pop();\r\n        }\r\n    }\r\n\r\n    onParticleDead(particle) { }\r\n\r\n    updateMatrix(particle) {\r\n        const moveOriginMatrix = WebGLUtil.makeTranslation(-particle.transform.textureWidth / 2, -particle.transform.textureHeight / 2);\r\n        const translationMatrix = WebGLUtil.makeTranslation(particle.p.x, particle.p.y);\r\n\r\n        const angel = particle.rotation * (MathUtils.PI_180);\r\n        const rotationMatrix = WebGLUtil.makeRotation(angel);\r\n\r\n        const scale = particle.scale * particle.transform.oldScale;\r\n        const scaleMatrix = WebGLUtil.makeScale(scale, scale);\r\n        let matrix = WebGLUtil.matrixMultiply(moveOriginMatrix, scaleMatrix);\r\n\r\n        matrix = WebGLUtil.matrixMultiply(matrix, rotationMatrix);\r\n        matrix = WebGLUtil.matrixMultiply(matrix, translationMatrix);\r\n\r\n        Mat3.inverse(matrix, particle.transform.imat);\r\n        matrix[2] = particle.alpha;\r\n\r\n        this.mstack.push(matrix);\r\n    }\r\n}","import Util from '../utils/Util';\r\nimport BaseRenderer from './BaseRenderer';\r\n\r\nexport default class CustomRenderer extends BaseRenderer {\r\n\r\n    constructor(element) {\r\n        super(element);\r\n\r\n        this.name = 'CustomRenderer';\r\n    }\r\n\r\n}","import Zone from './Zone';\r\nimport Util from '../utils/Util';\r\nimport MathUtils from '../math/MathUtils';\r\n\r\nexport default class LineZone extends Zone {\r\n\r\n\tconstructor(x1, y1, x2, y2, direction) {\r\n\t\tsuper();\r\n\r\n\t\tif (x2 - x1 >= 0) {\r\n\t\t\tthis.x1 = x1;\r\n\t\t\tthis.y1 = y1;\r\n\t\t\tthis.x2 = x2;\r\n\t\t\tthis.y2 = y2;\r\n\t\t} else {\r\n\t\t\tthis.x1 = x2;\r\n\t\t\tthis.y1 = y2;\r\n\t\t\tthis.x2 = x1;\r\n\t\t\tthis.y2 = y1;\r\n\t\t}\r\n\r\n\t\tthis.dx = this.x2 - this.x1;\r\n\t\tthis.dy = this.y2 - this.y1;\r\n\r\n\t\tthis.minx = Math.min(this.x1, this.x2);\r\n\t\tthis.miny = Math.min(this.y1, this.y2);\r\n\t\tthis.maxx = Math.max(this.x1, this.x2);\r\n\t\tthis.maxy = Math.max(this.y1, this.y2);\r\n\r\n\t\tthis.dot = this.x2 * this.y1 - this.x1 * this.y2;\r\n\t\tthis.xxyy = this.dx * this.dx + this.dy * this.dy;\r\n\r\n\t\tthis.gradient = this.getGradient();\r\n\t\tthis.length = this.getLength();\r\n\t\tthis.direction = Util.initValue(direction, '>');\r\n\t}\r\n\r\n\r\n\tgetPosition() {\r\n\t\tthis.random = Math.random();\r\n\t\tthis.vector.x = this.x1 + this.random * this.length * Math.cos(this.gradient);\r\n\t\tthis.vector.y = this.y1 + this.random * this.length * Math.sin(this.gradient);\r\n\r\n\t\treturn this.vector;\r\n\t}\r\n\r\n\tgetDirection(x, y) {\r\n\t\tconst A = this.dy;\r\n\t\tconst B = -this.dx;\r\n\t\tconst C = this.dot;\r\n\t\tconst D = B == 0 ? 1 : B;\r\n\r\n\t\tif ((A * x + B * y + C) * D > 0)\r\n\t\t\treturn true;\r\n\t\telse\r\n\t\t\treturn false;\r\n\t}\r\n\r\n\tgetDistance(x, y) {\r\n\t\tconst A = this.dy;\r\n\t\tconst B = -this.dx;\r\n\t\tconst C = this.dot;\r\n\t\tconst D = (A * x + B * y + C);\r\n\r\n\t\treturn D / Math.sqrt(this.xxyy);\r\n\t}\r\n\r\n\tgetSymmetric(v) {\r\n\t\tconst tha2 = v.getGradient();\r\n\t\tconst tha1 = this.getGradient();\r\n\t\tconst tha = 2 * (tha1 - tha2);\r\n\r\n\t\tconst oldx = v.x;\r\n\t\tconst oldy = v.y;\r\n\r\n\t\tv.x = oldx * Math.cos(tha) - oldy * Math.sin(tha);\r\n\t\tv.y = oldx * Math.sin(tha) + oldy * Math.cos(tha);\r\n\r\n\t\treturn v;\r\n\t}\r\n\r\n\tgetGradient() {\r\n\t\treturn Math.atan2(this.dy, this.dx);\r\n\t}\r\n\r\n\trangeOut(particle) {\r\n\t\tconst angle = Math.abs(this.getGradient());\r\n\r\n\t\tif (angle <= MathUtils.PI / 4) {\r\n\t\t\tif (particle.p.x <= this.maxx && particle.p.x >= this.minx) return true;\r\n\t\t} else {\r\n\t\t\tif (particle.p.y <= this.maxy && particle.p.y >= this.miny) return true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetLength() {\r\n\t\treturn Math.sqrt(this.dx * this.dx + this.dy * this.dy)\r\n\t}\r\n\r\n\tcrossing(particle) {\r\n\t\tif (this.crossType == \"dead\") {\r\n\t\t\tif (this.direction == \">\" || this.direction == \"R\" || this.direction == \"right\" || this.direction == \"down\") {\r\n\t\t\t\tif (!this.rangeOut(particle)) return;\r\n\t\t\t\tif (this.getDirection(particle.p.x, particle.p.y)) particle.dead = true;\r\n\t\t\t} else {\r\n\t\t\t\tif (!this.rangeOut(particle)) return;\r\n\t\t\t\tif (!this.getDirection(particle.p.x, particle.p.y)) particle.dead = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telse if (this.crossType == \"bound\") {\r\n\t\t\tif (!this.rangeOut(particle)) return;\r\n\r\n\t\t\tif (this.getDistance(particle.p.x, particle.p.y) <= particle.radius) {\r\n\t\t\t\tif (this.dx == 0) {\r\n\t\t\t\t\tparticle.v.x *= -1;\r\n\t\t\t\t} else if (this.dy == 0) {\r\n\t\t\t\t\tparticle.v.y *= -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getSymmetric(particle.v);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telse if (this.crossType == \"cross\") {\r\n\t\t\tif (this.alert) {\r\n\t\t\t\tconsole.error('Sorry lineZone does not support cross method');\r\n\t\t\t\tthis.alert = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}","import Zone from './Zone';\r\nimport MathUtils from '../math/MathUtils';\r\n\r\nexport default class CircleZone extends Zone {\r\n\r\n    constructor(x, y, radius) {\r\n        super();\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n        this.radius = radius;\r\n\r\n        this.angle = 0;\r\n        this.center = { x, y };\r\n    }\r\n\r\n    getPosition() {\r\n        this.random = Math.random();\r\n        this.angle = MathUtils.PIx2 * Math.random();\r\n\r\n        this.vector.x = this.x + this.random * this.radius * Math.cos(this.angle);\r\n        this.vector.y = this.y + this.random * this.radius * Math.sin(this.angle);\r\n\r\n        return this.vector;\r\n    }\r\n\r\n    setCenter(x, y) {\r\n        this.center.x = x;\r\n        this.center.y = y;\r\n    }\r\n\r\n    crossing(particle) {\r\n        const d = particle.p.distanceTo(this.center);\r\n\r\n        if (this.crossType == \"dead\") {\r\n            if (d - particle.radius > this.radius)\r\n                particle.dead = true;\r\n        } else if (this.crossType == \"bound\") {\r\n            if (d + particle.radius >= this.radius)\r\n                this.getSymmetric(particle);\r\n        } else if (this.crossType == \"cross\") {\r\n            if (this.alert) {\r\n                alert('Sorry CircleZone does not support cross method');\r\n                this.alert = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    getSymmetric(particle) {\r\n        let tha2 = particle.v.getGradient();\r\n        let tha1 = this.getGradient(particle);\r\n\r\n        let tha = 2 * (tha1 - tha2);\r\n        let oldx = particle.v.x;\r\n        let oldy = particle.v.y;\r\n\r\n        particle.v.x = oldx * Math.cos(tha) - oldy * Math.sin(tha);\r\n        particle.v.y = oldx * Math.sin(tha) + oldy * Math.cos(tha);\r\n    }\r\n\r\n    getGradient(particle) {\r\n        return -MathUtils.PI_2 + Math.atan2(particle.p.y - this.center.y, particle.p.x - this.center.x);\r\n    }\r\n}","import Zone from './Zone';\r\n\r\nexport default class RectZone extends Zone {\r\n\r\n\tconstructor(x, y, width, height) {\r\n\t\tsuper();\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t}\r\n\r\n\tgetPosition() {\r\n\t\tthis.vector.x = this.x + Math.random() * this.width;\r\n\t\tthis.vector.y = this.y + Math.random() * this.height;\r\n\r\n\t\treturn this.vector;\r\n\t}\r\n\r\n\tcrossing(particle) {\r\n\t\tif (this.crossType == \"dead\") {\r\n\t\t\tif (particle.p.x + particle.radius < this.x)\r\n\t\t\t\tparticle.dead = true;\r\n\t\t\telse if (particle.p.x - particle.radius > this.x + this.width)\r\n\t\t\t\tparticle.dead = true;\r\n\r\n\t\t\tif (particle.p.y + particle.radius < this.y)\r\n\t\t\t\tparticle.dead = true;\r\n\t\t\telse if (particle.p.y - particle.radius > this.y + this.height)\r\n\t\t\t\tparticle.dead = true;\r\n\t\t}\r\n\r\n\t\telse if (this.crossType == \"bound\") {\r\n\t\t\tif (particle.p.x - particle.radius < this.x) {\r\n\t\t\t\tparticle.p.x = this.x + particle.radius;\r\n\t\t\t\tparticle.v.x *= -1;\r\n\t\t\t} else if (particle.p.x + particle.radius > this.x + this.width) {\r\n\t\t\t\tparticle.p.x = this.x + this.width - particle.radius;\r\n\t\t\t\tparticle.v.x *= -1;\r\n\t\t\t}\r\n\r\n\t\t\tif (particle.p.y - particle.radius < this.y) {\r\n\t\t\t\tparticle.p.y = this.y + particle.radius;\r\n\t\t\t\tparticle.v.y *= -1;\r\n\t\t\t} else if (particle.p.y + particle.radius > this.y + this.height) {\r\n\t\t\t\tparticle.p.y = this.y + this.height - particle.radius;\r\n\t\t\t\tparticle.v.y *= -1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telse if (this.crossType == \"cross\") {\r\n\t\t\tif (particle.p.x + particle.radius < this.x && particle.v.x <= 0)\r\n\t\t\t\tparticle.p.x = this.x + this.width + particle.radius;\r\n\t\t\telse if (particle.p.x - particle.radius > this.x + this.width && particle.v.x >= 0)\r\n\t\t\t\tparticle.p.x = this.x - particle.radius;\r\n\r\n\t\t\tif (particle.p.y + particle.radius < this.y && particle.v.y <= 0)\r\n\t\t\t\tparticle.p.y = this.y + this.height + particle.radius;\r\n\t\t\telse if (particle.p.y - particle.radius > this.y + this.height && particle.v.y >= 0)\r\n\t\t\t\tparticle.p.y = this.y - particle.radius;\r\n\t\t}\r\n\t}\r\n}","import Zone from './Zone';\r\nimport Util from '../utils/Util';\r\n\r\nexport default class ImageZone extends Zone {\r\n\r\n\tconstructor(imageData, x, y, d) {\r\n\t\tsuper();\r\n\r\n\t\tthis.reset(imageData, x, y, d);\r\n\t}\r\n\r\n\treset(imageData, x, y, d) {\r\n\t\tthis.imageData = imageData;\r\n\t\tthis.x = Util.initValue(x, 0);\r\n\t\tthis.y = Util.initValue(y, 0);\r\n\t\tthis.d = Util.initValue(d, 2);\r\n\r\n\t\tthis.vectors = [];\r\n\t\tthis.setVectors();\r\n\t}\r\n\r\n\tsetVectors() {\r\n\t\tlet i, j;\r\n\t\tconst length1 = this.imageData.width;\r\n\t\tconst length2 = this.imageData.height;\r\n\r\n\t\tfor (i = 0; i < length1; i += this.d) {\r\n\t\t\tfor (j = 0; j < length2; j += this.d) {\r\n\t\t\t\tlet index = ((j >> 0) * length1 + (i >> 0)) * 4;\r\n\r\n\t\t\t\tif (this.imageData.data[index + 3] > 0) {\r\n\t\t\t\t\tthis.vectors.push({ x: i + this.x, y: j + this.y });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.vector;\r\n\t}\r\n\r\n\tgetBound(x, y) {\r\n\t\tvar index = ((y >> 0) * this.imageData.width + (x >> 0)) * 4;\r\n\t\tif (this.imageData.data[index + 3] > 0)\r\n\t\t\treturn true;\r\n\t\telse\r\n\t\t\treturn false;\r\n\t}\r\n\r\n\tgetPosition() {\r\n\t\treturn this.vector.copy(this.vectors[Math.floor(Math.random() * this.vectors.length)]);\r\n\t}\r\n\r\n\tgetColor(x, y) {\r\n\t\tx -= this.x;\r\n\t\ty -= this.y;\r\n\t\tvar i = ((y >> 0) * this.imageData.width + (x >> 0)) * 4;\r\n\r\n\t\treturn {\r\n\t\t\tr: this.imageData.data[i],\r\n\t\t\tg: this.imageData.data[i + 1],\r\n\t\t\tb: this.imageData.data[i + 2],\r\n\t\t\ta: this.imageData.data[i + 3]\r\n\t\t};\r\n\t}\r\n\r\n\tcrossing(particle) {\r\n\t\tif (this.crossType == \"dead\") {\r\n\t\t\tif (this.getBound(particle.p.x - this.x, particle.p.y - this.y))\r\n\t\t\t\tparticle.dead = true;\r\n\t\t\telse\r\n\t\t\t\tparticle.dead = false;\r\n\t\t} \r\n\t\t\r\n\t\telse if (this.crossType == \"bound\") {\r\n\t\t\tif (!this.getBound(particle.p.x - this.x, particle.p.y - this.y))\r\n\t\t\t\tparticle.v.negate();\r\n\t\t}\r\n\t}\r\n}","import Util from '../utils/Util';\r\nimport ColorUtil from '../utils/ColorUtil';\r\nimport MathUtils from '../math/MathUtils';\r\nimport CircleZone from '../zone/CircleZone';\r\nimport PointZone from '../zone/PointZone';\r\nimport LineZone from '../zone/LineZone';\r\nimport RectZone from '../zone/RectZone';\r\n\r\nexport default {\r\n\taddEventListener(proton, fun) {\r\n\t\tproton.addEventListener(\"PROTON_UPDATE_AFTER\", () => fun());\r\n\t},\r\n\r\n\tgetStyle(color) {\r\n\t\tconst rgb = ColorUtil.hexToRGB(color || '#ff0000');\r\n\t\treturn `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.5)`;\r\n\t},\r\n\t\r\n\tdrawZone(proton, canvas, zone, clear) {\r\n\t\tconst context = canvas.getContext('2d');\r\n\t\tconst style = this.getStyle();\r\n\r\n\t\tthis.addEventListener(proton, () => {\r\n\t\t\tif (clear)\r\n\t\t\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\tif (zone instanceof PointZone) {\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.fillStyle = style;\r\n\t\t\t\tcontext.arc(zone.x, zone.y, 10, 0, Math.PI * 2, true);\r\n\t\t\t\tcontext.fill();\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t} else if (zone instanceof LineZone) {\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.strokeStyle = style;\r\n\t\t\t\tcontext.moveTo(zone.x1, zone.y1);\r\n\t\t\t\tcontext.lineTo(zone.x2, zone.y2);\r\n\t\t\t\tcontext.stroke();\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t} else if (zone instanceof RectZone) {\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.strokeStyle = style;\r\n\t\t\t\tcontext.drawRect(zone.x, zone.y, zone.width, zone.height);\r\n\t\t\t\tcontext.stroke();\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t} else if (zone instanceof CircleZone) {\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.strokeStyle = style;\r\n\t\t\t\tcontext.arc(zone.x, zone.y, zone.radius, 0, Math.PI * 2, true);\r\n\t\t\t\tcontext.stroke();\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t\r\n\tdrawEmitter(proton, canvas, emitter, clear) {\r\n\t\tconst context = canvas.getContext('2d');\r\n\t\tconst style = this.getStyle();\r\n\r\n\t\tthis.addEventListener(proton, () => {\r\n\t\t\tif (clear) context.clearRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.fillStyle = style;\r\n\t\t\tcontext.arc(emitter.p.x, emitter.p.y, 10, 0, Math.PI * 2, true);\r\n\t\t\tcontext.fill();\r\n\t\t\tcontext.closePath();\r\n\t\t});\r\n\t},\r\n}\r\n\r\n","// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\r\n\r\n// requestAnimationFrame polyfill by Erik Möller\r\n// fixes from Paul Irish and Tino Zijdel\r\n( function() {\r\n\t\tvar lastTime = 0;\r\n\t\tvar vendors = ['ms', 'moz', 'webkit', 'o'];\r\n\t\tfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n\t\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n\t\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n\t\t}\r\n\r\n\t\tif (!window.requestAnimationFrame)\r\n\t\t\twindow.requestAnimationFrame = function(callback, element) {\r\n\t\t\t\tvar currTime = new Date().getTime();\r\n\t\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n\t\t\t\tvar id = window.setTimeout(function() {\r\n\t\t\t\t\tcallback(currTime + timeToCall);\r\n\t\t\t\t}, timeToCall);\r\n\t\t\t\tlastTime = currTime + timeToCall;\r\n\t\t\t\treturn id;\r\n\t\t\t};\r\n\r\n\t\tif (!window.cancelAnimationFrame)\r\n\t\t\twindow.cancelAnimationFrame = function(id) {\r\n\t\t\t\tclearTimeout(id);\r\n\t\t\t};\r\n\t}()); ","// import \r\nimport Proton from \"./core/Proton\";\r\nimport Particle from \"./core/Particle\";\r\nimport Pool from \"./core/Pool\";\r\n\r\nimport Util from \"./utils/Util\";\r\nimport ColorUtil from \"./utils/ColorUtil\";\r\nimport MathUtils from \"./math/MathUtils\";\r\nimport Vector2D from \"./math/Vector2D\";\r\nimport Polar2D from \"./math/Polar2D\";\r\nimport Mat3 from \"./math/Mat3\";\r\nimport Span from \"./math/Span\";\r\nimport ArraySpan from \"./math/ArraySpan\";\r\nimport Rectangle from \"./math/Rectangle\";\r\nimport ease from \"./math/ease\";\r\n\r\nimport Rate from \"./initialize/Rate\";\r\nimport Initialize from \"./initialize/Initialize\";\r\nimport Life from \"./initialize/Life\";\r\nimport Position from \"./initialize/Position\";\r\nimport Velocity from \"./initialize/Velocity\";\r\nimport Mass from \"./initialize/Mass\";\r\nimport Radius from \"./initialize/Radius\";\r\nimport Body from \"./initialize/Body\";\r\n\r\nimport Behaviour from \"./behaviour/Behaviour\";\r\nimport Force from \"./behaviour/Force\";\r\nimport Attraction from \"./behaviour/Attraction\";\r\nimport RandomDrift from \"./behaviour/RandomDrift\";\r\nimport Gravity from \"./behaviour/Gravity\";\r\nimport Collision from \"./behaviour/Collision\";\r\nimport CrossZone from \"./behaviour/CrossZone\";\r\nimport Alpha from \"./behaviour/Alpha\";\r\nimport Scale from \"./behaviour/Scale\";\r\nimport Rotate from \"./behaviour/Rotate\";\r\nimport Color from \"./behaviour/Color\";\r\nimport Repulsion from \"./behaviour/Repulsion\";\r\nimport GravityWell from \"./behaviour/GravityWell\";\r\n\r\nimport Emitter from \"./emitter/Emitter\";\r\nimport BehaviourEmitter from \"./emitter/BehaviourEmitter\";\r\nimport FollowEmitter from \"./emitter/FollowEmitter\";\r\n\r\nimport CanvasRenderer from \"./render/CanvasRenderer\";\r\nimport DomRenderer from \"./render/DomRenderer\";\r\nimport EaselRenderer from \"./render/EaselRenderer\";\r\nimport PixelRenderer from \"./render/PixelRenderer\";\r\nimport PixiRenderer from \"./render/PixiRenderer\";\r\nimport WebGLRenderer from \"./render/WebGLRenderer\";\r\nimport CustomRenderer from \"./render/CustomRenderer\";\r\n\r\nimport Zone from \"./zone/Zone\";\r\nimport LineZone from \"./zone/LineZone\";\r\nimport CircleZone from \"./zone/CircleZone\";\r\nimport PointZone from \"./zone/PointZone\";\r\nimport RectZone from \"./zone/RectZone\";\r\nimport ImageZone from \"./zone/ImageZone\";\r\n\r\nimport Debug from \"./debug/Debug\";\r\nimport \"./polyfill/requestAnimationFrame\";\r\n\r\n// namespace\r\nProton.Particle = Proton.P = Particle;\r\nProton.Pool = Pool;\r\n\r\nProton.Util = Util;\r\nProton.ColorUtil = ColorUtil;\r\nProton.MathUtils = MathUtils;\r\nProton.Vector2D = Proton.Vector = Vector2D;\r\nProton.Polar2D = Proton.Polar = Polar2D;\r\nProton.ArraySpan = ArraySpan;\r\nProton.Rectangle = Rectangle;\r\nProton.Rate = Rate;\r\nProton.ease = ease;\r\nProton.Span = Span;\r\nProton.Mat3 = Mat3;\r\nProton.getSpan = (a, b, center) => new Span(a, b, center);\r\nProton.createArraySpan = ArraySpan.createArraySpan;\r\n\r\nProton.Initialize = Proton.Init = Initialize;\r\nProton.Life = Proton.L = Life;\r\nProton.Position = Proton.P = Position;\r\nProton.Velocity = Proton.V = Velocity;\r\nProton.Mass = Proton.M = Mass;\r\nProton.Radius = Proton.R = Radius;\r\nProton.Body = Proton.B = Body;\r\n\r\nProton.Behaviour = Behaviour;\r\nProton.Force = Proton.F = Force;\r\nProton.Attraction = Proton.A = Attraction;\r\nProton.RandomDrift = Proton.RD = RandomDrift;\r\nProton.Gravity = Proton.G = Gravity;\r\nProton.Collision = Collision;\r\nProton.CrossZone = CrossZone;\r\nProton.Alpha = Proton.A = Alpha;\r\nProton.Scale = Proton.S = Scale;\r\nProton.Rotate = Rotate;\r\nProton.Color = Color;\r\nProton.Repulsion = Repulsion;\r\nProton.GravityWell = GravityWell;\r\n\r\nProton.Emitter = Emitter;\r\nProton.BehaviourEmitter = BehaviourEmitter;\r\nProton.FollowEmitter = FollowEmitter;\r\n\r\nProton.Zone = Zone;\r\nProton.LineZone = LineZone;\r\nProton.CircleZone = CircleZone;\r\nProton.PointZone = PointZone;\r\nProton.RectZone = RectZone;\r\nProton.ImageZone = ImageZone;\r\n\r\nProton.CanvasRenderer = CanvasRenderer;\r\nProton.DomRenderer = DomRenderer;\r\nProton.EaselRenderer = EaselRenderer;\r\nProton.PixiRenderer = PixiRenderer;\r\nProton.PixelRenderer = PixelRenderer;\r\nProton.WebGLRenderer = Proton.WebGlRenderer = WebGLRenderer;\r\nProton.CustomRenderer = CustomRenderer;\r\n\r\nProton.Debug = Debug;\r\n\r\nObject.assign(Proton, ease);\r\n\r\n// export\r\nexport default Proton;"],"names":["PI","MathUtils","a","b","INT","Math","random","floor","center","f","randomAToB","display","num","toString","slice","Vector2D","x","y","atan2","PI_2","v","w","undefined","addVectors","subVectors","s","set","multiplyScalar","sqrt","divideScalar","length","distanceToSquared","tha","cos","sin","dx","dy","alpha","Span","isArray","Util","initValue","randomFloating","i","tx","ty","angleInRadians","c","sx","sy","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","id","width","height","position","dom","document","createElement","style","opacity","transform","resize","marginLeft","marginTop","div","scale","rotate","willChange","css3","key","val","bkey","charAt","toUpperCase","substr","IMG_CACHE","CANVAS_CACHE","canvasID","context","image","rect","drawImage","imagedata","getImageData","clearRect","img","callback","param","src","Image","onload","e","target","WebGLUtil","nhpot","canvas","DomUtil","createCanvas","getContext","value","defaults","Object","prototype","call","array","obj","ignore","o","indexOf","constructor","args","concat","factoryFunction","bind","apply","pOBJ","hasProp","p","particle","copy","prototypeObject","filters","singleProp","hasOwnProperty","getSpanValue","pan","getValue","ImgUtil","arr","destroy","uid","getCacheID","cache","isInner","Pool","total","params","__puid","PUID","getID","pop","createOrClone","getCache","push","create","classApply","clone","count","Stats","proton","container","type","emitterIndex","rendererIndex","body","add","emitter","getEmitter","renderer","getRenderer","str","emitters","emitSpeed","getEmitterPos","initializes","concatArr","behaviours","name","getCreatedNumber","getCount","pool","innerHTML","cssText","join","addEventListener","bg","color","parentNode","appendChild","renderers","result","cpool","round","EventDispatcher","_listeners","listener","removeEventListener","splice","listeners","handler","TargetClass","dispatchEvent","hasEventListener","removeAllEventListeners","Integration","particles","time","damping","eulerIntegrate","sleep","old","mass","clear","Proton","integrationType","oldTime","elapsed","stats","EULER","integrator","render","init","index","remove","parent","EMITTER_ADDED","EMITTER_REMOVED","PROTON_UPDATE","USE_CLOCK","Date","getTime","amendChangeTabsBug","emittersUpdate","PROTON_UPDATE_AFTER","update","getAllParticles","MEASURE","RK2","PARTICLE_CREATED","PARTICLE_UPDATE","PARTICLE_SLEEP","PARTICLE_DEAD","pow","ease","easeLinear","Particle","ID","reset","setPrototypeByObject","N180_PI","life","Infinity","age","energy","dead","sprite","radius","rotation","easing","destroyObject","removeAllBehaviours","rgb","r","g","applyBehaviours","max","applyBehaviour","behaviour","parents","initialize","addBehaviour","destroyArray","h","hex16","substring","parseInt","rbg","Number","Polar2D","abs","getX","getY","mat3","mat","Float32Array","mat1","mat2","d","m","vec","ArraySpan","_arr","randomColor","Rectangle","bottom","right","Rate","numpan","timepan","numPan","setSpanValue","timePan","startTime","nextTime","Initialize","Life","lifePan","Zone","vector","crossType","alert","PointZone","Position","zone","getPosition","Velocity","rpan","thapan","rPan","thaPan","vr","polar2d","normalizeVelocity","PI_180","Mass","massPan","Radius","oldRadius","Body","imagetarget","inner","Behaviour","getEasing","force","removeBehaviour","Force","fx","fy","normalizeForce","calculate","Attraction","targetPosition","normalizeValue","radiusSq","attractionForce","lengthSq","sub","normalize","RandomDrift","driftX","driftY","delay","panFoce","addXY","Gravity","Collision","collisionPool","delta","newPool","otherParticle","overlap","totalMass","averageMass1","averageMass2","distance","CrossZone","crossing","Alpha","same","alphaA","alphaB","Scale","scaleA","scaleB","Rotate","influence","rotationA","rotationB","getDirection","Color","createArraySpan","colorA","ColorUtil","hexToRGB","colorB","Repulsion","GravityWell","centerPoint","distanceVec","distanceSq","factor","bindEmitter","setVector2DByObject","degreeTransform","Emitter","pObj","emitTime","totalTime","rate","stoped","isNaN","oldStoped","oldEmitTime","oldTotalTime","step","initAll","rest","initializer","arguments","emitting","integrate","dispatch","expire","event","bindEvent","createParticle","get","setupParticle","addBehaviours","stop","slow","removeAllInitializers","removeEmitter","BehaviourEmitter","selfBehaviours","FollowEmitter","mouseTarget","window","_allowEmitting","initEventHandler","mousemoveHandler","mousemove","mousedownHandler","mousedown","mouseupHandler","mouseup","layerX","layerY","offsetX","offsetY","babelHelpers.get","BaseRenderer","element","stroke","initHandler","circleConf","isCircle","thinkness","_protonUpdateHandler","onProtonUpdate","_protonUpdateAfterHandler","onProtonUpdateAfter","_emitterAddedHandler","onEmitterAdded","_emitterRemovedHandler","onEmitterRemoved","_particleCreatedHandler","onParticleCreated","_particleUpdateHandler","onParticleUpdate","_particleDeadHandler","onParticleDead","CanvasRenderer","bufferCache","getImgFromCache","addImg2Body","drawCircle","buffer","createBuffer","bufferContext","globalAlpha","globalCompositeOperation","fillStyle","rgbToHex","fillRect","save","translate","restore","beginPath","arc","strokeStyle","lineWidth","closePath","fill","size","DomRenderer","createBody","transform3d","bodyReady","backgroundColor","removeChild","babelHelpers.typeof","createCircle","createSprite","createDiv","borderRadius","borderColor","borderWidth","url","backgroundImage","EaselRenderer","addChild","scaleX","scaleY","graphics","regX","regY","createjs","Graphics","String","beginStroke","beginFill","shape","Shape","PixelRenderer","rectangle","imageData","createImageData","putImageData","setPixel","elementwidth","data","PixiRenderer","setColor","tint","getHex16FromParticle","PIXI","Sprite","fromImage","anchor","endFill","MStack","mats","Mat3","multiply","WebGLRenderer","gl","antialias","stencil","depth","initVar","setMaxRadius","initShaders","initBuffers","blendEquation","FUNC_ADD","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","umat","smat","mstack","viewport","circleCanvasURL","vsSource","fsSource","texturebuffers","A","B","fs","shader","createShader","FRAGMENT_SHADER","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","getShader","getFragmentShader","vertexShader","getVertexShader","sprogram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","useProgram","vpa","getAttribLocation","tca","enableVertexAttribArray","tMatUniform","getUniformLocation","samplerUniform","useTex","uniform1i","vs","idx","unitIBuffer","bindBuffer","ELEMENT_ARRAY_BUFFER","bufferData","Uint16Array","STATIC_DRAW","ids","unitI33","stripBuffer","raidus","circleCanvasRadius","toDataURL","_w","_h","_width","_height","_scaleX","_scaleY","createTexture","texture","vcBuffer","tcBuffer","ARRAY_BUFFER","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","generateMipmap","textureLoaded","textureWidth","textureHeight","tmat","imat","oldScale","getCanvasFromCache","drawImg2Canvas","updateMatrix","uniform3f","uniformMatrix3fv","top","vertexAttribPointer","FLOAT","drawElements","TRIANGLES","UNSIGNED_SHORT","moveOriginMatrix","makeTranslation","translationMatrix","angel","rotationMatrix","makeRotation","scaleMatrix","makeScale","matrix","matrixMultiply","inverse","CustomRenderer","LineZone","x1","y1","x2","y2","direction","minx","min","miny","maxx","maxy","dot","xxyy","gradient","getGradient","getLength","C","D","tha2","tha1","oldx","oldy","angle","rangeOut","getDistance","getSymmetric","error","CircleZone","PIx2","distanceTo","RectZone","ImageZone","vectors","setVectors","j","length1","length2","getBound","negate","fun","getStyle","moveTo","lineTo","drawRect","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","currTime","timeToCall","setTimeout","P","Vector","Polar","getSpan","Init","L","V","M","R","F","RD","G","S","WebGlRenderer","Debug","assign"],"mappings":"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"}